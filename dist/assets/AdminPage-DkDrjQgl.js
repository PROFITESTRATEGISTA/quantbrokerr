import{r as n,s as c,j as e}from"./index-C7vs-yIx.js";import{c as k,a as P,C as me,T as xe,X as H,b as ue,E as he,L as pe}from"./Layout-8jPHfCdU.js";import{A as L,F as W,a as ge,P as fe}from"./plus-kbtyhVWs.js";import{U as J}from"./users-CpxliW1w.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=k("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=k("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=k("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=k("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=k("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),we=()=>{const[h,Q]=n.useState([]),[b,v]=n.useState(!0),[F,g]=n.useState(null),[q,f]=n.useState(null),[C,X]=n.useState(""),[E,Z]=n.useState("all"),[j,R]=n.useState({start:"",end:""}),[y,M]=n.useState([]),[K,U]=n.useState(!1),[Y,S]=n.useState(!1),[T,A]=n.useState(null),[r,o]=n.useState({full_name:"",email:"",phone:"",password:"",is_active:!0,leverage_multiplier:1,contracted_plan:"none"}),[i,_]=n.useState({}),[$,D]=n.useState(!1),[_e,z]=n.useState(!1);n.useEffect(()=>{ee(),N()},[]);const ee=async()=>{try{const{data:{user:t}}=await c.auth.getUser();z((t==null?void 0:t.email)==="pedropardal04@gmail.com")}catch(t){console.error("Error checking admin status:",t),z(!1)}},N=async()=>{var t;try{v(!0);let s=[];try{const{data:l,error:u}=await c.rpc("get_all_users_with_profiles");if(!u&&l)s=l,console.log("Users from function:",s.length);else throw u||new Error("Function returned no data")}catch(l){console.warn("Custom function failed, falling back to user_profiles:",l);const{data:u,error:x}=await c.from("user_profiles").select("*").order("created_at",{ascending:!1});if(x)throw x;s=u||[]}const{data:{user:a}}=await c.auth.getUser();if(a&&a.email==="pedropardal04@gmail.com"&&!s.find(u=>u.id===a.id)){const{error:u}=await c.from("user_profiles").insert({id:a.id,email:a.email,phone:a.phone||null,leverage_multiplier:5,is_active:!0,contracted_plan:"none"});u||s.unshift({id:a.id,email:a.email,phone:a.phone||null,full_name:((t=a.user_metadata)==null?void 0:t.full_name)||"",created_at:a.created_at,last_sign_in_at:null,email_confirmed_at:a.email_confirmed_at,phone_confirmed_at:a.phone_confirmed_at,leverage_multiplier:5,is_active:!0,contracted_plan:"none"})}const m=s.filter(l=>!l.leverage_multiplier&&(l.email||l.phone));if(m.length>0){console.log("Creating profiles for users without them:",m.length);const l=m.map(x=>({id:x.id,email:x.email||"",phone:x.phone||"",full_name:x.full_name||"",leverage_multiplier:1,is_active:!0,contracted_plan:"none"})),{error:u}=await c.from("user_profiles").insert(l);u||m.forEach(x=>{x.leverage_multiplier=1,x.is_active=!0,x.contracted_plan="none"})}const d=s.map(l=>({id:l.id,full_name:l.full_name||"",email:l.email||"",phone:l.phone||"",created_at:l.created_at,last_sign_in_at:l.last_sign_in_at,leverage_multiplier:l.leverage_multiplier||1,is_active:l.is_active!==!1,contracted_plan:l.contracted_plan||"none",email_confirmed_at:l.email_confirmed_at,phone_confirmed_at:l.phone_confirmed_at}));console.log("Users found:",d.length),console.log("Users with phones:",d.filter(l=>l.phone).length),console.log("Users with emails:",d.filter(l=>l.email).length),Q(d)}catch(s){console.error("Error fetching users:",s),g("Erro ao carregar usuários")}finally{v(!1)}},te=t=>{if(!t)return"";const s=t.replace(/\D/g,"");if(s.startsWith("55")&&s.length>=13){const a=s.slice(0,2),m=s.slice(2,4),d=s.slice(4,9),l=s.slice(9,13);return`+${a} (${m}) ${d}-${l}`}return t},B=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),I=t=>{const s=t.replace(/\D/g,"");return s.length>=10&&s.length<=13},V=(t,s=!1)=>{const a={};return s?(t.email.trim()&&!B(t.email)&&(a.email="Email inválido"),t.phone.trim()&&!I(t.phone)&&(a.phone="Telefone inválido")):(t.full_name.trim()||(a.full_name="Nome completo é obrigatório"),t.email.trim()?B(t.email)||(a.email="Email inválido"):a.email="Email é obrigatório",t.phone.trim()?I(t.phone)||(a.phone="Telefone inválido"):a.phone="Telefone é obrigatório",t.password.trim()?t.password.length<6&&(a.password="Senha deve ter pelo menos 6 caracteres"):a.password="Senha é obrigatória"),(t.leverage_multiplier<1||t.leverage_multiplier>5)&&(a.leverage_multiplier="Alavancagem deve estar entre 1x e 5x"),a},se=async t=>{t.preventDefault();const s=V(r);if(Object.keys(s).length>0){_(s);return}try{v(!0);const{data:a}=await c.from("user_profiles").select("email, phone").or(`email.eq.${r.email},phone.eq.${r.phone}`).maybeSingle();if(a){if(a.email===r.email){_({email:"Email já está em uso"});return}if(a.phone===r.phone){_({phone:"Telefone já está em uso"});return}}const{data:m,error:d}=await c.auth.signUp({email:r.email,password:r.password,options:{data:{full_name:r.full_name,phone:r.phone}}});if(d)throw d;if(m.user){const{error:l}=await c.from("user_profiles").insert({id:m.user.id,full_name:r.full_name,email:r.email,phone:r.phone,leverage_multiplier:r.leverage_multiplier,is_active:r.is_active,contracted_plan:r.contracted_plan});if(l)throw l;f("Usuário criado com sucesso!"),U(!1),w(),N()}}catch(a){console.error("Error adding user:",a),g(a.message||"Erro ao criar usuário")}finally{v(!1)}},ae=async t=>{if(t.preventDefault(),!T)return;const s=V(r,!0);if(Object.keys(s).length>0){_(s);return}try{v(!0);const{error:a}=await c.from("user_profiles").update({full_name:r.full_name,email:r.email,phone:r.phone,leverage_multiplier:r.leverage_multiplier,is_active:r.is_active,contracted_plan:r.contracted_plan}).eq("id",T.id);if(a)throw a;f("Usuário atualizado com sucesso!"),S(!1),A(null),w(),N()}catch(a){console.error("Error updating user:",a),g(a.message||"Erro ao atualizar usuário")}finally{v(!1)}},re=async t=>{if(confirm("Tem certeza que deseja excluir este usuário?"))try{const{error:s}=await c.from("user_profiles").delete().eq("id",t);if(s)throw s;f("Usuário excluído com sucesso!"),N()}catch(s){console.error("Error deleting user:",s),g("Erro ao excluir usuário")}},le=async(t,s)=>{try{const{error:a}=await c.from("user_profiles").update({is_active:s}).eq("id",t);if(a)throw a;f(`Usuário ${s?"ativado":"desativado"} com sucesso!`),N()}catch(a){console.error("Error updating user status:",a),g("Erro ao atualizar status do usuário")}},O=async(t,s)=>{try{const{error:a}=await c.from("user_profiles").update({leverage_multiplier:s}).eq("id",t);if(a)throw a;f(`Alavancagem atualizada para ${s}x com sucesso!`),N()}catch(a){console.error("Error updating leverage:",a),g("Erro ao atualizar alavancagem")}},ie=async(t,s)=>{try{f(`Email de redefinição de senha enviado para ${s}`)}catch(a){console.error("Error resetting password:",a),g("Erro ao redefinir senha")}},w=()=>{o({full_name:"",email:"",phone:"",password:"",is_active:!0,leverage_multiplier:1,contracted_plan:"none"}),_({})},ne=t=>{A(t),o({full_name:t.full_name||"",email:t.email,phone:t.phone||"",password:"",is_active:t.is_active,leverage_multiplier:t.leverage_multiplier,contracted_plan:t.contracted_plan}),S(!0)},p=h.filter(t=>{var d;const s=((d=t.full_name)==null?void 0:d.toLowerCase().includes(C.toLowerCase()))||t.email.toLowerCase().includes(C.toLowerCase())||t.phone&&t.phone.includes(C),a=E==="all"||E==="active"&&t.is_active||E==="inactive"&&!t.is_active,m=!j.start||!j.end||new Date(t.created_at)>=new Date(j.start)&&new Date(t.created_at)<=new Date(j.end);return s&&a&&m}),oe=t=>{M(s=>s.includes(t)?s.filter(a=>a!==t):[...s,t])},G=()=>{M(y.length===p.length?[]:p.map(t=>t.id))},ce=t=>{switch(t){case"bitcoin":return"Bitcoin";case"mini-indice":return"Mini Índice";case"mini-dolar":return"Mini Dólar";case"portfolio-completo":return"Portfólio Completo";case"none":return"Nenhum";default:return t}},de=t=>{switch(t){case"bitcoin":return"bg-orange-100 text-orange-800";case"mini-indice":return"bg-blue-100 text-blue-800";case"mini-dolar":return"bg-green-100 text-green-800";case"portfolio-completo":return"bg-purple-100 text-purple-800";case"none":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return b&&h.length===0?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("img",{src:"https://i.postimg.cc/5tjcZ4qJ/Chat-GPT-Image-12-de-jul-de-2025-21-56-40.png",alt:"Quant Broker Logo",className:"h-12 w-12 mr-4 rounded-lg shadow-sm"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Painel Administrativo"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie usuários e configurações de alavancagem"})]})]})}),F&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center",children:[e.jsx(L,{className:"h-5 w-5 mr-2"}),F,e.jsx("button",{onClick:()=>g(null),className:"ml-auto text-red-500 hover:text-red-700",children:"×"})]}),q&&e.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center",children:[e.jsx(P,{className:"h-5 w-5 mr-2"}),q,e.jsx("button",{onClick:()=>f(null),className:"ml-auto text-green-500 hover:text-green-700",children:"×"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx(je,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nome, email ou telefone...",value:C,onChange:t=>X(t.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full sm:w-80"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:E,onChange:t=>Z(t.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"active",children:"Ativos"}),e.jsx("option",{value:"inactive",children:"Inativos"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-5 w-5 text-gray-400"}),e.jsx("input",{type:"date",value:j.start,onChange:t=>R(s=>({...s,start:t.target.value})),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("span",{className:"text-gray-500",children:"até"}),e.jsx("input",{type:"date",value:j.end,onChange:t=>R(s=>({...s,end:t.target.value})),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("button",{onClick:()=>U(!0),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[e.jsx(Ne,{className:"w-4 h-4"}),"Adicionar Usuário"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(J,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total de Usuários"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Usuários Ativos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h.filter(t=>t.is_active).length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xe,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Alavancagem Média"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[h.length>0?(h.reduce((t,s)=>t+s.leverage_multiplier,0)/h.length).toFixed(1):"0","x"]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(W,{className:"h-8 w-8 text-orange-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Filtrados"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p.length})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Usuários"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Total: ",h.length," | Filtrados: ",p.length]}),y.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[y.length," selecionados"]}),e.jsx("button",{onClick:()=>M([]),className:"text-sm text-blue-600 hover:text-blue-800",children:"Limpar seleção"})]}),e.jsx("button",{onClick:G,className:"text-sm text-blue-600 hover:text-blue-800",children:y.length===p.length?"Desmarcar todos":"Selecionar todos"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",checked:y.length===p.length&&p.length>0,onChange:G,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome Completo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Telefone"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Alavancagem"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Plano"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cadastro"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Último Login"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:y.includes(t.id),onChange:()=>oe(t.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:(t.full_name||t.email).charAt(0).toUpperCase()}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.full_name||"Nome não informado"}),e.jsx("div",{className:"text-sm text-gray-500",children:t.email_confirmed_at?e.jsxs("span",{className:"flex items-center",children:[e.jsx(P,{className:"w-3 h-3 text-green-500 mr-1"}),"Email verificado"]}):e.jsxs("span",{className:"flex items-center",children:[e.jsx(L,{className:"w-3 h-3 text-yellow-500 mr-1"}),"Email não verificado"]})})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:te(t.phone||"")}),t.phone_confirmed_at?e.jsxs("div",{className:"text-xs text-green-600 flex items-center",children:[e.jsx(P,{className:"w-3 h-3 mr-1"}),"Verificado"]}):t.phone?e.jsxs("div",{className:"text-xs text-yellow-600 flex items-center",children:[e.jsx(L,{className:"w-3 h-3 mr-1"}),"Não verificado"]}):null]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:t.email})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>le(t.id,!t.is_active),className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200"}`,children:t.is_active?"Ativo":"Inativo"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>O(t.id,Math.max(1,t.leverage_multiplier-1)),className:"p-1 text-red-600 hover:text-red-800",disabled:t.leverage_multiplier<=1,title:"Diminuir alavancagem",children:e.jsx(ve,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 min-w-[3rem] text-center",children:[t.leverage_multiplier,"x"]}),e.jsx("button",{onClick:()=>O(t.id,Math.min(5,t.leverage_multiplier+1)),className:"p-1 text-green-600 hover:text-green-800",disabled:t.leverage_multiplier>=5,title:"Aumentar alavancagem",children:e.jsx(ge,{className:"h-4 w-4"})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${de(t.contracted_plan)}`,children:ce(t.contracted_plan)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.last_sign_in_at?new Date(t.last_sign_in_at).toLocaleDateString("pt-BR"):"Nunca"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>ne(t),className:"text-blue-600 hover:text-blue-800",title:"Editar usuário",children:e.jsx(fe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ie(t.id,t.email),className:"text-yellow-600 hover:text-yellow-800",title:"Redefinir senha",children:e.jsx(be,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>re(t.id),className:"text-red-600 hover:text-red-800",title:"Excluir usuário",children:e.jsx(ye,{className:"h-4 w-4"})})]})})]},t.id))})]})}),p.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(J,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:b?"Carregando usuários...":h.length===0?"Nenhum usuário cadastrado":"Nenhum usuário encontrado com os filtros aplicados"})]})]}),K&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Adicionar Novo Usuário"}),e.jsx("button",{onClick:()=>{U(!1),w()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(H,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:se,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo *"}),e.jsx("input",{type:"text",value:r.full_name,onChange:t=>o(s=>({...s,full_name:t.target.value})),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${i.full_name?"border-red-300":"border-gray-300"}`,placeholder:"Nome completo do usuário"}),i.full_name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.full_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:r.email,onChange:t=>o(s=>({...s,email:t.target.value})),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${i.email?"border-red-300":"border-gray-300"}`,placeholder:"email@exemplo.com"}),i.email&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone"}),e.jsx("input",{type:"tel",value:r.phone,onChange:t=>o(s=>({...s,phone:t.target.value})),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${i.phone?"border-red-300":"border-gray-300"}`,placeholder:"(11) 99999-9999"}),i.phone&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:$?"text":"password",value:r.password,onChange:t=>o(s=>({...s,password:t.target.value})),className:`w-full px-4 py-3 pr-12 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${i.password?"border-red-300":"border-gray-300"}`,placeholder:"••••••••"}),e.jsx("button",{type:"button",onClick:()=>D(!$),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:$?e.jsx(ue,{className:"h-5 w-5"}):e.jsx(he,{className:"h-5 w-5"})})]}),i.password&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alavancagem"}),e.jsxs("select",{value:r.leverage_multiplier,onChange:t=>o(s=>({...s,leverage_multiplier:parseInt(t.target.value)})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:1,children:"1x"}),e.jsx("option",{value:2,children:"2x"}),e.jsx("option",{value:3,children:"3x"}),e.jsx("option",{value:4,children:"4x"}),e.jsx("option",{value:5,children:"5x"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plano Contratado"}),e.jsxs("select",{value:r.contracted_plan,onChange:t=>o(s=>({...s,contracted_plan:t.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"none",children:"Nenhum"}),e.jsx("option",{value:"bitcoin",children:"Bitcoin"}),e.jsx("option",{value:"mini-indice",children:"Mini Índice"}),e.jsx("option",{value:"mini-dolar",children:"Mini Dólar"}),e.jsx("option",{value:"portfolio-completo",children:"Portfólio Completo"})]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:r.is_active,onChange:t=>o(s=>({...s,is_active:t.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm text-gray-700",children:"Conta ativa"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:b,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg transition-colors disabled:opacity-50",children:b?"Criando...":"Criar Usuário"}),e.jsx("button",{type:"button",onClick:()=>{U(!1),w()},className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white px-4 py-3 rounded-lg transition-colors",children:"Cancelar"})]})]})]})}),Y&&T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Editar Usuário"}),e.jsx("button",{onClick:()=>{S(!1),A(null),w()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(H,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:ae,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo *"}),e.jsx("input",{type:"text",value:r.full_name,onChange:t=>o(s=>({...s,full_name:t.target.value})),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${i.full_name?"border-red-300":"border-gray-300"}`,placeholder:"Nome completo do usuário"}),i.full_name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.full_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:r.email,onChange:t=>o(s=>({...s,email:t.target.value})),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${i.email?"border-red-300":"border-gray-300"}`,placeholder:"email@exemplo.com"}),i.email&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone *"}),e.jsx("input",{type:"tel",value:r.phone,onChange:t=>o(s=>({...s,phone:t.target.value})),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${i.phone?"border-red-300":"border-gray-300"}`,placeholder:"(11) 99999-9999"}),i.phone&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alavancagem"}),e.jsxs("select",{value:r.leverage_multiplier,onChange:t=>o(s=>({...s,leverage_multiplier:parseInt(t.target.value)})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:1,children:"1x"}),e.jsx("option",{value:2,children:"2x"}),e.jsx("option",{value:3,children:"3x"}),e.jsx("option",{value:4,children:"4x"}),e.jsx("option",{value:5,children:"5x"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plano Contratado"}),e.jsxs("select",{value:r.contracted_plan,onChange:t=>o(s=>({...s,contracted_plan:t.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"none",children:"Nenhum"}),e.jsx("option",{value:"bitcoin",children:"Bitcoin"}),e.jsx("option",{value:"mini-indice",children:"Mini Índice"}),e.jsx("option",{value:"mini-dolar",children:"Mini Dólar"}),e.jsx("option",{value:"portfolio-completo",children:"Portfólio Completo"})]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"edit_is_active",checked:r.is_active,onChange:t=>o(s=>({...s,is_active:t.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"edit_is_active",className:"ml-2 text-sm text-gray-700",children:"Conta ativa"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:b,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg transition-colors disabled:opacity-50",children:b?"Salvando...":"Salvar Alterações"}),e.jsx("button",{type:"button",onClick:()=>{S(!1),A(null),w()},className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white px-4 py-3 rounded-lg transition-colors",children:"Cancelar"})]})]})]})})]})})},Se=()=>e.jsx(pe,{children:e.jsx("div",{className:"pt-20",children:e.jsx(we,{})})});export{Se as default};
