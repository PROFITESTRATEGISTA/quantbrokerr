import{r as c,s as m,j as e}from"./index-BOpeAQJX.js";import{c as q,B as Ve,X as re,T as Fe,a as he,C as Ie,b as Ge,d as We,E as He,L as Qe}from"./Layout-Cxc6macY.js";import{S as Je,C as Xe,a as we,P as pe,A as Ne,F as te}from"./save-DySaCQDR.js";import{T as Ye}from"./trending-down-wxA4mDxS.js";import{U as _e}from"./users-B-4cxYDg.js";import{D as Ze}from"./dollar-sign-Wg3-U-Na.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=q("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=q("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=q("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=q("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=q("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=q("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=q("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=q("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),lt=()=>{const[y,H]=c.useState([]),[k,b]=c.useState([]),[Q,B]=c.useState([]),[se,u]=c.useState(!0),[J,h]=c.useState(null),[T,A]=c.useState(null),[O,z]=c.useState(!1),[P,$]=c.useState(!1),[p,E]=c.useState(null),[V,M]=c.useState(null),[d,v]=c.useState({user_id:"",plan_type:"mini-indice",billing_period:"monthly",monthly_value:0,contract_start:"",contract_end:"",is_active:!0}),[g,N]=c.useState({description:"",category:"operacional",amount:0,cost_date:new Date().toISOString().split("T")[0],is_recurring:!1});c.useEffect(()=>{ae()},[]);const ae=async()=>{try{u(!0),await Promise.all([I(),F(),le()])}catch(a){console.error("Error fetching data:",a),h("Erro ao carregar dados")}finally{u(!1)}},I=async()=>{try{console.log("🔍 Fetching contracts...");const{data:a,error:l}=await m.from("client_contracts").select(`
          *,
          user_profiles(full_name, email)
        `).order("created_at",{ascending:!1});if(l){console.error("❌ Error fetching contracts:",l),H([]);return}console.log("✅ Raw contracts data:",a);const de=(a||[]).map(Z=>{var me,ue;return{...Z,user_name:((me=Z.user_profiles)==null?void 0:me.full_name)||"Nome não informado",user_email:((ue=Z.user_profiles)==null?void 0:ue.email)||"Email não informado"}});console.log("✅ Formatted contracts:",de),H(de)}catch(a){console.error("❌ Catch error fetching contracts:",a),H([])}},F=async()=>{try{const{data:a,error:l}=await m.from("financial_costs").select("id, description, category, amount, cost_date, is_recurring").order("cost_date",{ascending:!1});if(l){console.error("Error fetching costs:",l),b([]);return}b(a||[])}catch(a){console.error("Error fetching costs:",a),b([])}},le=async()=>{try{const{data:a,error:l}=await m.from("user_profiles").select("id, full_name, email").eq("is_active",!0).order("full_name");if(l){console.error("Error fetching users:",l),B([]);return}B(a||[])}catch(a){console.error("Error fetching users:",a),B([])}},w=async a=>{a.preventDefault();try{if(h(null),console.log("💾 Saving contract...",{editingContract:p,contractForm:d}),p){console.log("📝 Updating existing contract:",p.id);const{error:l}=await m.from("client_contracts").update(d).eq("id",p.id);if(l)throw console.error("❌ Error updating contract:",l),l;console.log("✅ Contract updated successfully"),A("Contrato atualizado com sucesso!")}else{console.log("➕ Creating new contract:",d);const{error:l}=await m.from("client_contracts").insert([d]);if(l)throw console.error("❌ Error creating contract:",l),l;console.log("✅ Contract created successfully"),A("Contrato criado com sucesso!")}z(!1),E(null),x(),await I()}catch(l){console.error("❌ Contract save error:",l),h(l.message)}},ge=async a=>{a.preventDefault();try{if(h(null),V){const{error:l}=await m.from("financial_costs").update(g).eq("id",V.id);if(l)throw l;A("Custo atualizado com sucesso!")}else{const{error:l}=await m.from("financial_costs").insert([g]);if(l)throw l;A("Custo adicionado com sucesso!")}$(!1),M(null),_(),F()}catch(l){h(l.message)}},n=async a=>{if(confirm("Tem certeza que deseja excluir este contrato?"))try{console.log("🗑️ Deleting contract:",a);const{error:l}=await m.from("client_contracts").delete().eq("id",a);if(l)throw console.error("❌ Error deleting contract:",l),l;console.log("✅ Contract deleted successfully"),A("Contrato excluído com sucesso!"),await I()}catch(l){console.error("❌ Contract delete error:",l),h(l.message)}},f=async a=>{if(confirm("Tem certeza que deseja excluir este custo?"))try{const{error:l}=await m.from("financial_costs").delete().eq("id",a);if(l)throw l;A("Custo excluído com sucesso!"),F()}catch(l){h(l.message)}},x=()=>{v({user_id:"",plan_type:"mini-indice",billing_period:"monthly",monthly_value:0,contract_start:"",contract_end:"",is_active:!0})},_=()=>{N({description:"",category:"operacional",amount:0,cost_date:new Date().toISOString().split("T")[0],is_recurring:!1})},X=a=>{E(a),v({user_id:a.user_id,plan_type:a.plan_type,billing_period:a.billing_period,monthly_value:a.monthly_value,contract_start:a.contract_start,contract_end:a.contract_end,is_active:a.is_active}),z(!0)},fe=a=>{M(a),N({description:a.description,category:a.category,amount:a.amount,cost_date:a.cost_date,is_recurring:a.is_recurring}),$(!0)},S=new Date().toISOString().slice(0,7),G=y.filter(a=>a.is_active),oe=G.reduce((a,l)=>a+l.monthly_value,0),ne=k.filter(a=>a.cost_date.startsWith(S)||a.is_recurring).reduce((a,l)=>a+l.amount,0),Y=oe-ne,ie=a=>({bitcoin:"Bitcoin","mini-indice":"Mini Índice","mini-dolar":"Mini Dólar","portfolio-completo":"Portfólio Completo"})[a]||a,ce=a=>({monthly:"Mensal",semiannual:"Semestral",annual:"Anual"})[a]||a;return se?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Ve,{className:"h-12 w-12 text-green-600 mr-4"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Painel Financeiro"}),e.jsx("p",{className:"text-gray-600",children:"Controle de receitas, custos e contratos"})]})]})}),J&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center",children:[e.jsx(re,{className:"h-5 w-5 mr-2"}),J,e.jsx("button",{onClick:()=>h(null),className:"ml-auto text-red-500 hover:text-red-700",children:"×"})]}),T&&e.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center",children:[e.jsx(Je,{className:"h-5 w-5 mr-2"}),T,e.jsx("button",{onClick:()=>A(null),className:"ml-auto text-green-500 hover:text-green-700",children:"×"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fe,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Receita Mensal"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["R$ ",oe.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ye,{className:"h-8 w-8 text-red-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Custos Mensais"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["R$ ",ne.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Xe,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Lucro Mensal"}),e.jsxs("p",{className:`text-2xl font-bold ${Y>=0?"text-green-600":"text-red-600"}`,children:["R$ ",Y.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(_e,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Contratos Ativos"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:G.length})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm mb-8",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Contratos dos Clientes"}),e.jsxs("button",{onClick:()=>{x(),E(null),z(!0)},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[e.jsx(we,{className:"w-4 h-4"}),"Novo Contrato"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Plano"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Modalidade"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Mensal"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Início"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fim"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.user_name}),e.jsx("div",{className:"text-sm text-gray-500",children:a.user_email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:ie(a.plan_type)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ce(a.billing_period)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600",children:["R$ ",a.monthly_value.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(a.contract_start).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(a.contract_end).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${a.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.is_active?"Ativo":"Inativo"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>X(a),className:"text-blue-600 hover:text-blue-800",title:"Editar contrato",children:e.jsx(pe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>n(a.id),className:"text-red-600 hover:text-red-800",title:"Excluir contrato",children:e.jsx(Ce,{className:"h-4 w-4"})})]})})]},a.id))})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Custos da Empresa"}),e.jsxs("button",{onClick:()=>{_(),M(null),$(!0)},className:"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors",children:[e.jsx(we,{className:"w-4 h-4"}),"Novo Custo"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descrição"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categoria"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Recorrente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:a.description}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800",children:a.category})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-red-600",children:["R$ ",a.amount.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(a.cost_date).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${a.is_recurring?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:a.is_recurring?"Sim":"Não"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>fe(a),className:"text-blue-600 hover:text-blue-800",title:"Editar custo",children:e.jsx(pe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>f(a.id),className:"text-red-600 hover:text-red-800",title:"Excluir custo",children:e.jsx(Ce,{className:"h-4 w-4"})})]})})]},a.id))})]})})]}),O&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:p?"Editar Contrato":"Novo Contrato"}),e.jsx("button",{onClick:()=>{z(!1),E(null),x()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(re,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:w,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente *"}),e.jsxs("select",{value:d.user_id,onChange:a=>v({...d,user_id:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900",required:!0,children:[e.jsx("option",{value:"",children:"Selecione um cliente"}),Q.map(a=>e.jsxs("option",{value:a.id,children:[a.full_name||a.email||"Usuário sem nome"," (",a.email,")"]},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plano *"}),e.jsxs("select",{value:d.plan_type,onChange:a=>v({...d,plan_type:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"bitcoin",children:"Bitcoin"}),e.jsx("option",{value:"mini-indice",children:"Mini Índice"}),e.jsx("option",{value:"mini-dolar",children:"Mini Dólar"}),e.jsx("option",{value:"portfolio-completo",children:"Portfólio Completo"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Modalidade *"}),e.jsxs("select",{value:d.billing_period,onChange:a=>v({...d,billing_period:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"monthly",children:"Mensal"}),e.jsx("option",{value:"semiannual",children:"Semestral"}),e.jsx("option",{value:"annual",children:"Anual"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor Mensal (R$) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",value:d.monthly_value,onChange:a=>v({...d,monthly_value:parseFloat(a.target.value)||0}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",required:!0}),d.monthly_value<=0&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:"Valor deve ser maior que zero"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Início do Contrato *"}),e.jsx("input",{type:"date",value:d.contract_start,onChange:a=>v({...d,contract_start:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:new Date().toISOString().split("T")[0],required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fim do Contrato *"}),e.jsx("input",{type:"date",value:d.contract_end,onChange:a=>v({...d,contract_end:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:d.contract_start||new Date().toISOString().split("T")[0],required:!0}),d.contract_end&&d.contract_start&&new Date(d.contract_end)<=new Date(d.contract_start)&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:"Data de fim deve ser posterior ao início"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"contract_active",checked:d.is_active,onChange:a=>v({...d,is_active:a.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"contract_active",className:"ml-2 text-sm text-gray-700",children:"Contrato ativo"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg transition-colors",children:p?"Atualizar Contrato":"Criar Contrato"}),e.jsx("button",{type:"button",onClick:()=>{z(!1),E(null),x()},className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white px-4 py-3 rounded-lg transition-colors",children:"Cancelar"})]})]})]})}),P&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:V?"Editar Custo":"Novo Custo"}),e.jsx("button",{onClick:()=>{$(!1),M(null),_()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(re,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:ge,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrição *"}),e.jsx("input",{type:"text",value:g.description,onChange:a=>N({...g,description:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descrição do custo",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoria *"}),e.jsxs("select",{value:g.category,onChange:a=>N({...g,category:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"operacional",children:"Operacional"}),e.jsx("option",{value:"marketing",children:"Marketing"}),e.jsx("option",{value:"tecnologia",children:"Tecnologia"}),e.jsx("option",{value:"pessoal",children:"Pessoal"}),e.jsx("option",{value:"infraestrutura",children:"Infraestrutura"}),e.jsx("option",{value:"outros",children:"Outros"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor (R$) *"}),e.jsx("input",{type:"number",step:"0.01",value:g.amount,onChange:a=>N({...g,amount:parseFloat(a.target.value)||0}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data *"}),e.jsx("input",{type:"date",value:g.cost_date,onChange:a=>N({...g,cost_date:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"cost_recurring",checked:g.is_recurring,onChange:a=>N({...g,is_recurring:a.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"cost_recurring",className:"ml-2 text-sm text-gray-700",children:"Custo recorrente (mensal)"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-3 rounded-lg transition-colors",children:V?"Atualizar Custo":"Adicionar Custo"}),e.jsx("button",{type:"button",onClick:()=>{$(!1),M(null),_()},className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white px-4 py-3 rounded-lg transition-colors",children:"Cancelar"})]})]})]})})]})})},ot=()=>{var Se,De,Ue;const[y,H]=c.useState([]),[k,b]=c.useState(!0),[Q,B]=c.useState("users"),[se,u]=c.useState(null),[J,h]=c.useState(null),[T,A]=c.useState(""),[O,z]=c.useState("all"),[P,$]=c.useState({start:"",end:""}),[p,E]=c.useState([]),[V,M]=c.useState(!1),[d,v]=c.useState(!1),[g,N]=c.useState(null),[ae,I]=c.useState(!1),[F,le]=c.useState(""),[w,ge]=c.useState({key:"",direction:null}),[n,f]=c.useState({full_name:"",email:"",phone:"",password:"",is_active:!0,leverage_multiplier:1,contracted_plan:"none"}),[x,_]=c.useState({}),[X,fe]=c.useState(!1),[S,G]=c.useState([{column:"status",values:[],isOpen:!1},{column:"plan",values:[],isOpen:!1},{column:"leverage",values:[],isOpen:!1},{column:"verification",values:[],isOpen:!1}]);c.useEffect(()=>{a(),l()},[]);const oe=t=>{if(!t)return"";const r=t.replace(/\D/g,"");if(r.startsWith("55")&&r.length>=13){const s=r.slice(0,2),o=r.slice(2,4),i=r.slice(4,9),D=r.slice(9,13);return`+${s} (${o}) ${i}-${D}`}return t},ne=t=>{if(!t)return"Nunca";const r=new Date(t),s=r.getDate().toString().padStart(2,"0"),o=(r.getMonth()+1).toString().padStart(2,"0"),i=r.getFullYear(),D=r.getHours().toString().padStart(2,"0"),U=r.getMinutes().toString().padStart(2,"0");return`${s}/${o}/${i} ${D}:${U}`},Y=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),ie=t=>{const r=t.replace(/\D/g,"");return r.length>=10&&r.length<=13},ce=(t,r=!1)=>{const s={};return r?(t.email.trim()&&!Y(t.email)&&(s.email="Email inválido"),t.phone.trim()&&!ie(t.phone)&&(s.phone="Telefone inválido")):(t.full_name.trim()||(s.full_name="Nome completo é obrigatório"),t.email.trim()?Y(t.email)||(s.email="Email inválido"):s.email="Email é obrigatório",t.phone.trim()?ie(t.phone)||(s.phone="Telefone inválido"):s.phone="Telefone é obrigatório",t.password.trim()?t.password.length<6&&(s.password="Senha deve ter pelo menos 6 caracteres"):s.password="Senha é obrigatória"),(t.leverage_multiplier<1||t.leverage_multiplier>5)&&(s.leverage_multiplier="Alavancagem deve estar entre 1x e 5x"),s},a=async()=>{try{await m.auth.getUser()}catch(t){console.error("Error checking admin status:",t)}},l=async()=>{try{b(!0),console.log("🔧 Carregando usuários da tabela user_profiles...");const{data:t,error:r}=await m.from("user_profiles").select("*").order("created_at",{ascending:!1});if(r)throw console.error("❌ Erro ao buscar usuários:",r),r;const s=t||[];console.log("✅ Usuários encontrados:",s.length);const o=s.map(i=>({id:i.id,full_name:i.full_name||"",email:i.email||"",phone:i.phone||"",created_at:i.created_at,last_sign_in_at:void 0,leverage_multiplier:i.leverage_multiplier||1,is_active:i.is_active!==!1,contracted_plan:i.contracted_plan||"none",email_confirmed_at:void 0,phone_confirmed_at:void 0}));console.log("✅ Usuários formatados:",o.length),console.log("📱 Usuários com telefone:",o.filter(i=>i.phone).length),console.log("📧 Usuários com email:",o.filter(i=>i.email).length),H(o)}catch(t){console.error("❌ Erro ao carregar usuários:",t),u("Erro ao carregar usuários: "+(t instanceof Error?t.message:"Erro desconhecido"))}finally{b(!1)}},de=async t=>{t.preventDefault();const r=ce(n);if(Object.keys(r).length>0){_(r);return}try{b(!0),u(null),_({}),console.log("🔧 Iniciando criação de usuário:",{email:n.email,full_name:n.full_name});const{data:s,error:o}=await m.from("user_profiles").select("email, phone").or(`email.eq.${n.email},phone.eq.${n.phone}`).maybeSingle();if(o)throw console.error("❌ Erro ao verificar usuário existente:",o),new Error("Erro ao verificar usuário existente: "+o.message);if(s){if(s.email===n.email){_({email:"Email já está em uso"});return}if(s.phone===n.phone){_({phone:"Telefone já está em uso"});return}}console.log("✅ Usuário não existe, criando no auth...");const{data:i,error:D}=await m.auth.signUp({email:n.email,password:n.password,options:{data:{full_name:n.full_name,phone:n.phone}}});if(D)throw console.error("❌ Erro ao criar usuário no auth:",D),new Error("Erro ao criar usuário: "+D.message);if(!i.user)throw console.error("❌ Usuário não foi criado no auth"),new Error("Falha ao criar usuário no sistema de autenticação");console.log("✅ Usuário criado no auth com ID:",i.user.id),await new Promise(j=>setTimeout(j,1e3));const{data:U,error:K}=await m.from("user_profiles").select("*").eq("id",i.user.id).single();if(K&&K.code!=="PGRST116"&&console.error("❌ Erro ao verificar perfil criado:",K),U){if(console.log("✅ Perfil criado automaticamente pelo trigger"),U.leverage_multiplier!==n.leverage_multiplier||U.contracted_plan!==n.contracted_plan||U.is_active!==n.is_active){const{error:j}=await m.from("user_profiles").update({leverage_multiplier:n.leverage_multiplier,is_active:n.is_active,contracted_plan:n.contracted_plan}).eq("id",i.user.id);if(j)throw console.error("❌ Erro ao atualizar perfil:",j),new Error("Erro ao atualizar perfil: "+j.message);console.log("✅ Perfil atualizado com dados específicos")}}else{console.log("⚠️ Perfil não foi criado automaticamente, criando manualmente...");const{error:j}=await m.from("user_profiles").insert({id:i.user.id,full_name:n.full_name,email:n.email,phone:n.phone,leverage_multiplier:n.leverage_multiplier,is_active:n.is_active,contracted_plan:n.contracted_plan});if(j)throw console.error("❌ Erro ao criar perfil manualmente:",j),new Error("Erro ao criar perfil do usuário: "+j.message);console.log("✅ Perfil criado manualmente")}console.log("✅ Usuário criado com sucesso!"),h("Usuário criado com sucesso!"),M(!1),W(),await l()}catch(s){console.error("❌ Erro geral ao criar usuário:",s);const o=s instanceof Error?s.message:"Erro ao criar usuário";u(o)}finally{b(!1)}},Z=async t=>{if(t.preventDefault(),!g)return;const r=ce(n,!0);if(Object.keys(r).length>0){_(r);return}try{u(null),_({}),console.log("🔧 Atualizando usuário:",g.id,"com dados:",n),b(!0);const{error:s}=await m.rpc("admin_create_or_update_profile",{user_id:g.id,user_email:n.email,user_phone:n.phone||null,user_full_name:n.full_name,user_leverage:n.leverage_multiplier,user_active:n.is_active,user_plan:n.contracted_plan});if(console.log("✅ Resultado da atualização:",{error:s}),s)throw console.error("❌ Erro na atualização:",s),s;console.log("✅ Usuário atualizado com sucesso"),h("Usuário atualizado com sucesso!"),v(!1),N(null),W(),await l()}catch(s){console.error("❌ Erro ao atualizar usuário:",s);const o=s instanceof Error?s.message:"Erro ao atualizar usuário";u(o)}finally{b(!1)}},me=async t=>{if(confirm("Tem certeza que deseja excluir este usuário?"))try{u(null),console.log("🔧 Excluindo usuário:",t);const{error:r}=await m.rpc("admin_delete_profile",{user_id:t});if(console.log("✅ Resultado da exclusão:",{error:r}),r)throw r;h("Usuário excluído com sucesso!"),await l()}catch(r){console.error("❌ Erro ao excluir usuário:",r);const s=r instanceof Error?r.message:"Erro ao excluir usuário";u(s)}},ue=async(t,r)=>{try{console.log("Toggling user status:",{userId:t,newStatus:r}),u(null);const{error:s}=await m.from("user_profiles").update({is_active:r}).eq("id",t);if(s)throw console.error("Supabase status error:",s),s;h(`Usuário ${r?"ativado":"desativado"} com sucesso!`),l()}catch(s){console.error("Error updating user status:",s);const o=s instanceof Error?s.message:"Erro ao atualizar status do usuário";u(o)}},ke=async(t,r)=>{try{u(null),console.log("Updating leverage for user:",t,"to:",r),console.log("🔧 Iniciando atualização de alavancagem:",{userId:t,newLeverage:r});const{data:s,error:o}=await m.from("user_profiles").select("id, leverage_multiplier, email").eq("id",t);if(o)throw console.error("❌ Error checking user:",o),new Error("Erro ao verificar usuário: "+o.message);if(!s||s.length===0)throw console.error("❌ User not found:",t),new Error("Usuário não encontrado");console.log("👤 User found:",s[0]);const{error:i}=await m.from("user_profiles").update({leverage_multiplier:r}).eq("id",t);if(i)throw console.error("❌ Error updating leverage:",i),i;console.log("✅ Leverage updated successfully"),await l(),h(`Alavancagem atualizada para ${r}x com sucesso!`)}catch(s){console.error("Error updating leverage:",s);const o=s instanceof Error?s.message:"Erro ao atualizar alavancagem";u(o)}},Pe=async(t,r)=>{try{u(null),console.log("🔧 Atualizando plano do usuário:",{userId:t,newPlan:r});const{data:s,error:o}=await m.from("user_profiles").select("id, contracted_plan, email").eq("id",t);if(o)throw console.error("❌ Error checking user:",o),new Error("Erro ao verificar usuário: "+o.message);if(!s||s.length===0)throw console.error("❌ User not found:",t),new Error("Usuário não encontrado");console.log("👤 User found:",s[0]);const{error:i}=await m.from("user_profiles").update({contracted_plan:r}).eq("id",t);if(i)throw console.error("❌ Error updating plan:",i),i;console.log("✅ Plan updated successfully"),await l(),h(`Plano atualizado para ${xe(r)} com sucesso!`)}catch(s){console.error("Error updating plan:",s);const o=s instanceof Error?s.message:"Erro ao atualizar plano";u(o)}},$e=async(t,r)=>{try{h(`Email de redefinição de senha enviado para ${r}`)}catch(s){console.error("Error resetting password:",s),u("Erro ao redefinir senha")}},W=()=>{f({full_name:"",email:"",phone:"",password:"",is_active:!0,leverage_multiplier:1,contracted_plan:"none"}),_({})},qe=async t=>{try{console.log("🔧 Carregando dados do usuário para edição:",t.id);const{data:r,error:s}=await m.from("user_profiles").select("*").eq("id",t.id).single();if(s){console.error("❌ Erro ao carregar dados do usuário:",s),u("Erro ao carregar dados do usuário: "+s.message);return}console.log("✅ Dados do usuário carregados:",r),N(t),f({full_name:r.full_name||"",email:r.email||"",phone:r.phone||"",password:"",is_active:r.is_active!==!1,leverage_multiplier:r.leverage_multiplier||1,contracted_plan:r.contracted_plan||"none"}),v(!0)}catch(r){console.error("❌ Erro ao preparar edição:",r),u("Erro ao preparar edição do usuário")}},be=t=>{G(r=>r.map(s=>s.column===t?{...s,isOpen:!s.isOpen}:{...s,isOpen:!1}))},ve=(t,r,s)=>{G(o=>o.map(i=>i.column===t?{...i,values:s?[...i.values,r]:i.values.filter(D=>D!==r)}:i))},je=t=>{G(r=>r.map(s=>s.column===t?{...s,values:[]}:s))},ye=t=>{switch(t){case"status":return["Ativo","Inativo"];case"plan":return["Nenhum","Bitcoin","Mini Índice","Mini Dólar","Portfólio Completo"];case"leverage":return["1x","2x","3x","4x","5x"];case"verification":return["Email Verificado","Email Não Verificado","Telefone Verificado","Telefone Não Verificado"];default:return[]}},Te=t=>{if(!t.phone){alert("Usuário não possui telefone cadastrado");return}const r=t.phone.replace(/\D/g,""),s=t.full_name||"Cliente",o=encodeURIComponent(`Olá ${s}! 👋

Sou da equipe Quant Broker e estou entrando em contato sobre seus Portfólios de IA.

Como posso ajudá-lo hoje?

📊 Dúvidas sobre performance
⚙️ Configurações de conta
📈 Alavancagem e estratégias
🎯 Suporte técnico

Estou aqui para ajudar!`),i=`https://wa.me/${r}?text=${o}`;window.open(i,"_blank")},L=t=>{let r="asc";w.key===t&&(w.direction==="asc"?r="desc":w.direction==="desc"?r=null:r="asc"),ge({key:t,direction:r})},R=t=>w.key!==t?e.jsx(Ae,{className:"h-4 w-4 text-gray-400"}):w.direction==="asc"?e.jsx(et,{className:"h-4 w-4 text-blue-600"}):w.direction==="desc"?e.jsx(Ke,{className:"h-4 w-4 text-blue-600"}):e.jsx(Ae,{className:"h-4 w-4 text-gray-400"});let C=y.filter(t=>{var Me;const r=((Me=t.full_name)==null?void 0:Me.toLowerCase().includes(T.toLowerCase()))||t.email.toLowerCase().includes(T.toLowerCase())||t.phone&&t.phone.includes(T),s=O==="all"||O==="active"&&t.is_active||O==="inactive"&&!t.is_active,o=!P.start||!P.end||new Date(t.created_at)>=new Date(P.start)&&new Date(t.created_at)<=new Date(P.end),i=S.find(ee=>ee.column==="status"),D=!(i!=null&&i.values.length)||i.values.includes(t.is_active?"Ativo":"Inativo"),U=S.find(ee=>ee.column==="plan"),K=!(U!=null&&U.values.length)||U.values.includes(xe(t.contracted_plan)),j=S.find(ee=>ee.column==="leverage"),Oe=!(j!=null&&j.values.length)||j.values.includes(`${t.leverage_multiplier}x`);return r&&s&&o&&D&&K&&Oe});w.direction&&(C=[...C].sort((t,r)=>{let s="",o="";switch(w.key){case"full_name":s=t.full_name||"",o=r.full_name||"";break;case"email":s=t.email||"",o=r.email||"";break;case"phone":s=t.phone||"",o=r.phone||"";break;case"is_active":s=t.is_active?1:0,o=r.is_active?1:0;break;case"leverage_multiplier":s=t.leverage_multiplier,o=r.leverage_multiplier;break;case"contracted_plan":s=t.contracted_plan||"",o=r.contracted_plan||"";break;case"created_at":s=new Date(t.created_at),o=new Date(r.created_at);break;case"last_sign_in_at":s=t.last_sign_in_at?new Date(t.last_sign_in_at):new Date(0),o=r.last_sign_in_at?new Date(r.last_sign_in_at):new Date(0);break;default:return 0}return s<o?w.direction==="asc"?-1:1:s>o?w.direction==="asc"?1:-1:0}));const ze=t=>{E(r=>r.includes(t)?r.filter(s=>s!==t):[...r,t])},Ee=()=>{E(p.length===C.length?[]:C.map(t=>t.id))},Le=async()=>{if(!(!F||p.length===0))try{b(!0);const{error:t}=await m.from("user_profiles").update({contracted_plan:F}).in("id",p);if(t)throw t;h(`Plano ${xe(F)} aplicado a ${p.length} usuários!`),E([]),le(""),I(!1),l()}catch(t){console.error("Error updating bulk plan:",t);const r=t instanceof Error?t.message:"Erro ao atualizar planos em lote";u(r)}finally{b(!1)}},Re=async()=>{const t=C.filter(r=>p.includes(r.id)&&r.contracted_plan==="none");if(t.length===0){u("Nenhum lead selecionado para exclusão");return}if(confirm(`Tem certeza que deseja excluir ${t.length} leads (usuários sem plano)?`))try{b(!0);const{error:r}=await m.from("user_profiles").delete().in("id",t.map(s=>s.id));if(r)throw r;h(`${t.length} leads excluídos com sucesso!`),E([]),l()}catch(r){console.error("Error deleting bulk leads:",r);const s=r instanceof Error?r.message:"Erro ao excluir leads";u(s)}finally{b(!1)}},xe=t=>{switch(t){case"bitcoin":return"Bitcoin";case"mini-indice":return"Mini Índice";case"mini-dolar":return"Mini Dólar";case"portfolio-completo":return"Portfólio Completo";case"none":return"Nenhum";default:return t}},Be=t=>{switch(t){case"bitcoin":return"bg-orange-100 text-orange-800";case"mini-indice":return"bg-blue-100 text-blue-800";case"mini-dolar":return"bg-green-100 text-green-800";case"portfolio-completo":return"bg-purple-100 text-purple-800";case"none":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return k&&y.length===0?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>B("users"),className:`py-2 px-1 border-b-2 font-medium text-sm ${Q==="users"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Gestão de Usuários"}),e.jsxs("button",{onClick:()=>B("financial"),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${Q==="financial"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Ze,{className:"h-4 w-4"}),"Painel Financeiro"]})]})})}),Q==="financial"?e.jsx(lt,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("img",{src:"https://i.postimg.cc/5tjcZ4qJ/Chat-GPT-Image-12-de-jul-de-2025-21-56-40.png",alt:"Quant Broker Logo",className:"h-12 w-12 mr-4 rounded-lg shadow-sm"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Painel Administrativo"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie usuários e configurações de alavancagem"})]})]})}),se&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center",children:[e.jsx(Ne,{className:"h-5 w-5 mr-2"}),se,e.jsx("button",{onClick:()=>u(null),className:"ml-auto text-red-500 hover:text-red-700",children:"×"})]}),J&&e.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center",children:[e.jsx(he,{className:"h-5 w-5 mr-2"}),J,e.jsx("button",{onClick:()=>h(null),className:"ml-auto text-green-500 hover:text-green-700",children:"×"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx(st,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nome, email ou telefone...",value:T,onChange:t=>A(t.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full sm:w-80"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:O,onChange:t=>z(t.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"active",children:"Ativos"}),e.jsx("option",{value:"inactive",children:"Inativos"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-5 w-5 text-gray-400"}),e.jsx("input",{type:"date",value:P.start,onChange:t=>$(r=>({...r,start:t.target.value})),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("span",{className:"text-gray-500",children:"até"}),e.jsx("input",{type:"date",value:P.end,onChange:t=>$(r=>({...r,end:t.target.value})),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("button",{onClick:()=>M(!0),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[e.jsx(at,{className:"w-4 h-4"}),"Adicionar Usuário"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(_e,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total de Usuários"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(he,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Usuários Ativos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.filter(t=>t.is_active).length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fe,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Alavancagem Média"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[y.length>0?(y.reduce((t,r)=>t+r.leverage_multiplier,0)/y.length).toFixed(1):"0","x"]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(te,{className:"h-8 w-8 text-orange-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Filtrados"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C.length})]})]})})]}),ae&&p.length>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg mb-4",children:[e.jsxs("h3",{className:"font-semibold text-blue-900 mb-3",children:["Ações em Lote (",p.length," usuários selecionados)"]}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-blue-800",children:"Alterar Plano:"}),e.jsxs("select",{value:F,onChange:t=>le(t.target.value),className:"border border-blue-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"",children:"Selecione um plano"}),e.jsx("option",{value:"none",children:"Nenhum"}),e.jsx("option",{value:"bitcoin",children:"Bitcoin"}),e.jsx("option",{value:"mini-indice",children:"Mini Índice"}),e.jsx("option",{value:"mini-dolar",children:"Mini Dólar"}),e.jsx("option",{value:"portfolio-completo",children:"Portfólio Completo"})]}),e.jsx("button",{onClick:Le,disabled:!F||k,className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 disabled:opacity-50",children:"Aplicar"})]}),e.jsxs("div",{className:"border-l border-blue-300 pl-4",children:[e.jsx("button",{onClick:Re,disabled:k,className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 disabled:opacity-50",children:"Excluir Leads Selecionados"}),e.jsx("p",{className:"text-xs text-red-700 mt-1",children:"Remove apenas usuários sem plano contratado"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Usuários"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Total: ",y.length," | Filtrados: ",C.length]}),p.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[p.length," selecionados"]}),e.jsx("button",{onClick:()=>E([]),className:"text-sm text-blue-600 hover:text-blue-800",children:"Limpar seleção"})]}),e.jsx("button",{onClick:Ee,className:"text-sm text-blue-600 hover:text-blue-800",children:p.length===C.length?"Desmarcar todos":"Selecionar todos"}),e.jsx("button",{onClick:()=>I(!ae),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700",children:"Ações em Lote"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",checked:p.length===C.length&&C.length>0,onChange:Ee,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[200px]",children:e.jsxs("button",{onClick:()=>L("full_name"),className:"flex items-center space-x-1 hover:text-gray-700 transition-colors",children:[e.jsx("span",{children:"Nome / Email"}),R("full_name")]})}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:e.jsxs("button",{onClick:()=>L("phone"),className:"flex items-center space-x-1 hover:text-gray-700 transition-colors",children:[e.jsx("span",{children:"Telefone"}),R("phone")]})}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>L("is_active"),className:"flex items-center space-x-1 hover:text-gray-700 transition-colors",children:[e.jsx("span",{children:"Status"}),R("is_active")]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>be("status"),className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(te,{className:"h-3 w-3"})}),((Se=S.find(t=>t.column==="status"))==null?void 0:Se.isOpen)&&e.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 min-w-[150px]",children:e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs font-medium",children:"Filtrar Status"}),e.jsx("button",{onClick:()=>je("status"),className:"text-xs text-blue-600 hover:text-blue-800",children:"Limpar"})]}),ye("status").map(t=>{var r;return e.jsxs("label",{className:"flex items-center gap-2 py-1",children:[e.jsx("input",{type:"checkbox",checked:((r=S.find(s=>s.column==="status"))==null?void 0:r.values.includes(t))||!1,onChange:s=>ve("status",t,s.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm",children:t})]},t)})]})})]})]})}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>L("leverage_multiplier"),className:"flex items-center space-x-1 hover:text-gray-700 transition-colors",children:[e.jsx("span",{children:"Alavancagem"}),R("leverage_multiplier")]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>be("leverage"),className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(te,{className:"h-3 w-3"})}),((De=S.find(t=>t.column==="leverage"))==null?void 0:De.isOpen)&&e.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 min-w-[150px]",children:e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs font-medium",children:"Filtrar Alavancagem"}),e.jsx("button",{onClick:()=>je("leverage"),className:"text-xs text-blue-600 hover:text-blue-800",children:"Limpar"})]}),ye("leverage").map(t=>{var r;return e.jsxs("label",{className:"flex items-center gap-2 py-1",children:[e.jsx("input",{type:"checkbox",checked:((r=S.find(s=>s.column==="leverage"))==null?void 0:r.values.includes(t))||!1,onChange:s=>ve("leverage",t,s.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm",children:t})]},t)})]})})]})]})}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-28",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>L("contracted_plan"),className:"flex items-center space-x-1 hover:text-gray-700 transition-colors",children:[e.jsx("span",{children:"Plano"}),R("contracted_plan")]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>be("plan"),className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(te,{className:"h-3 w-3"})}),((Ue=S.find(t=>t.column==="plan"))==null?void 0:Ue.isOpen)&&e.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 min-w-[150px]",children:e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs font-medium",children:"Filtrar Plano"}),e.jsx("button",{onClick:()=>je("plan"),className:"text-xs text-blue-600 hover:text-blue-800",children:"Limpar"})]}),ye("plan").map(t=>{var r;return e.jsxs("label",{className:"flex items-center gap-2 py-1",children:[e.jsx("input",{type:"checkbox",checked:((r=S.find(s=>s.column==="plan"))==null?void 0:r.values.includes(t))||!1,onChange:s=>ve("plan",t,s.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm",children:t})]},t)})]})})]})]})}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:e.jsxs("button",{onClick:()=>L("created_at"),className:"flex items-center space-x-1 hover:text-gray-700 transition-colors",children:[e.jsx("span",{children:"Cadastro"}),R("created_at")]})}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:e.jsxs("button",{onClick:()=>L("last_sign_in_at"),className:"flex items-center space-x-1 hover:text-gray-700 transition-colors",children:[e.jsx("span",{children:"Último Login"}),R("last_sign_in_at")]})}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:p.includes(t.id),onChange:()=>ze(t.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:(t.full_name||t.email).charAt(0).toUpperCase()}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 max-w-[180px] truncate",children:t.full_name||"Nome não informado"}),e.jsx("div",{className:"text-xs text-gray-500 max-w-[180px] truncate",children:t.email}),e.jsxs("div",{className:"text-xs text-gray-400 flex items-center mt-1",children:[t.email_confirmed_at?e.jsx(he,{className:"w-3 h-3 text-green-500 mr-1"}):e.jsx(Ne,{className:"w-3 h-3 text-yellow-500 mr-1"}),t.email_confirmed_at?"Verificado":"Não verificado"]})]})]})}),e.jsxs("td",{className:"px-3 py-3",children:[e.jsx("div",{className:"text-xs text-gray-900",children:oe(t.phone||"")}),t.phone_confirmed_at?e.jsxs("div",{className:"text-xs text-green-600 flex items-center mt-1",children:[e.jsx(he,{className:"w-3 h-3 mr-1"}),"✓"]}):t.phone?e.jsxs("div",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[e.jsx(Ne,{className:"w-3 h-3 mr-1"}),"!"]}):null]}),e.jsx("td",{className:"px-3 py-3",children:e.jsx("button",{onClick:()=>ue(t.id,!t.is_active),className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${t.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200"}`,children:t.is_active?"Ativo":"Inativo"})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>ke(t.id,Math.max(1,t.leverage_multiplier-1)),className:"p-1 text-red-600 hover:text-red-800",disabled:t.leverage_multiplier<=1,title:"Diminuir alavancagem",children:e.jsx(rt,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-xs font-medium text-gray-900 min-w-[2rem] text-center",children:[t.leverage_multiplier,"x"]}),e.jsx("button",{onClick:()=>ke(t.id,Math.min(5,t.leverage_multiplier+1)),className:"p-1 text-green-600 hover:text-green-800",disabled:t.leverage_multiplier>=5,title:"Aumentar alavancagem",children:e.jsx(we,{className:"h-4 w-4"})})]})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${Be(t.contracted_plan)}`,children:xe(t.contracted_plan)}),e.jsx("button",{onClick:()=>{const r=["none","bitcoin","mini-indice","mini-dolar","portfolio-completo"],s=r.indexOf(t.contracted_plan),o=r[(s+1)%r.length];Pe(t.id,o)},className:"p-1 text-blue-600 hover:text-blue-800",title:"Alterar plano",children:e.jsx(pe,{className:"h-3 w-3"})})]})}),e.jsx("td",{className:"px-3 py-3 text-xs text-gray-500",children:new Date(t.created_at).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-3 py-3 text-xs text-gray-500",children:ne(t.last_sign_in_at||null)}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[t.phone&&e.jsx("button",{onClick:()=>Te(t),className:"p-2 text-green-600 hover:text-green-800 bg-green-50 hover:bg-green-100 rounded-lg transition-colors",title:"Enviar WhatsApp",children:e.jsx(Ge,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>qe(t),className:"text-blue-600 hover:text-blue-800",title:"Editar usuário",children:e.jsx(pe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>$e(t.id,t.email),className:"text-yellow-600 hover:text-yellow-800",title:"Redefinir senha",children:e.jsx(tt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>me(t.id),className:"text-red-600 hover:text-red-800",title:"Excluir usuário",children:e.jsx(Ce,{className:"h-4 w-4"})})]})})]},t.id))})]})}),C.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_e,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:k?"Carregando usuários...":y.length===0?"Nenhum usuário cadastrado":"Nenhum usuário encontrado com os filtros aplicados"})]})]}),V&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Adicionar Novo Usuário"}),e.jsx("button",{onClick:()=>{M(!1),W()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(re,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:de,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo *"}),e.jsx("input",{type:"text",value:n.full_name,onChange:t=>f(r=>({...r,full_name:t.target.value})),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${x.full_name?"border-red-300":"border-gray-300"}`,placeholder:"Nome completo do usuário"}),x.full_name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.full_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:n.email,onChange:t=>f(r=>({...r,email:t.target.value})),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${x.email?"border-red-300":"border-gray-300"}`,placeholder:"email@exemplo.com"}),x.email&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone"}),e.jsx("input",{type:"tel",value:n.phone,onChange:t=>f(r=>({...r,phone:t.target.value})),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${x.phone?"border-red-300":"border-gray-300"}`,placeholder:"(11) 99999-9999"}),x.phone&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:X?"text":"password",value:n.password,onChange:t=>f(r=>({...r,password:t.target.value})),className:`w-full px-4 py-3 pr-12 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${x.password?"border-red-300":"border-gray-300"}`,placeholder:"••••••••"}),e.jsx("button",{type:"button",onClick:()=>fe(!X),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:X?e.jsx(We,{className:"h-5 w-5"}):e.jsx(He,{className:"h-5 w-5"})})]}),x.password&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alavancagem"}),e.jsxs("select",{value:n.leverage_multiplier,onChange:t=>f(r=>({...r,leverage_multiplier:parseInt(t.target.value)})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:1,children:"1x"}),e.jsx("option",{value:2,children:"2x"}),e.jsx("option",{value:3,children:"3x"}),e.jsx("option",{value:4,children:"4x"}),e.jsx("option",{value:5,children:"5x"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plano Contratado"}),e.jsxs("select",{value:n.contracted_plan,onChange:t=>f(r=>({...r,contracted_plan:t.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"none",children:"Nenhum"}),e.jsx("option",{value:"bitcoin",children:"Bitcoin"}),e.jsx("option",{value:"mini-indice",children:"Mini Índice"}),e.jsx("option",{value:"mini-dolar",children:"Mini Dólar"}),e.jsx("option",{value:"portfolio-completo",children:"Portfólio Completo"})]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:n.is_active,onChange:t=>f(r=>({...r,is_active:t.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm text-gray-700",children:"Conta ativa"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:k,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg transition-colors disabled:opacity-50",children:k?"Criando...":"Criar Usuário"}),e.jsx("button",{type:"button",onClick:()=>{M(!1),W()},className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white px-4 py-3 rounded-lg transition-colors",children:"Cancelar"})]})]})]})}),d&&g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Editar Usuário"}),e.jsx("button",{onClick:()=>{v(!1),N(null),W()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(re,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:Z,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo *"}),e.jsx("input",{type:"text",value:n.full_name,onChange:t=>f(r=>({...r,full_name:t.target.value})),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${x.full_name?"border-red-300":"border-gray-300"}`,placeholder:"Nome completo do usuário"}),x.full_name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.full_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:n.email,onChange:t=>f(r=>({...r,email:t.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-100",placeholder:"email@exemplo.com",disabled:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email não pode ser alterado após criação"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone *"}),e.jsx("input",{type:"tel",value:n.phone,onChange:t=>f(r=>({...r,phone:t.target.value})),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${x.phone?"border-red-300":"border-gray-300"}`,placeholder:"(11) 99999-9999"}),x.phone&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alavancagem"}),e.jsxs("select",{value:n.leverage_multiplier,onChange:t=>f(r=>({...r,leverage_multiplier:parseInt(t.target.value)})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:1,children:"1x"}),e.jsx("option",{value:2,children:"2x"}),e.jsx("option",{value:3,children:"3x"}),e.jsx("option",{value:4,children:"4x"}),e.jsx("option",{value:5,children:"5x"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plano Contratado"}),e.jsxs("select",{value:n.contracted_plan,onChange:t=>f(r=>({...r,contracted_plan:t.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"none",children:"Nenhum"}),e.jsx("option",{value:"bitcoin",children:"Bitcoin"}),e.jsx("option",{value:"mini-indice",children:"Mini Índice"}),e.jsx("option",{value:"mini-dolar",children:"Mini Dólar"}),e.jsx("option",{value:"portfolio-completo",children:"Portfólio Completo"})]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"edit_is_active",checked:n.is_active,onChange:t=>f(r=>({...r,is_active:t.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"edit_is_active",className:"ml-2 text-sm text-gray-700",children:"Conta ativa"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:k,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg transition-colors disabled:opacity-50",children:k?"Salvando...":"Salvar Alterações"}),e.jsx("button",{type:"button",onClick:()=>{v(!1),N(null),W()},className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white px-4 py-3 rounded-lg transition-colors",children:"Cancelar"})]})]})]})})]})]})})},xt=()=>e.jsx(Qe,{children:e.jsx(ot,{})});export{xt as default};
