import{r as o,s as x,j as e}from"./index-CkGFpjUD.js";import{c as T,B as Ie,X as te,T as Fe,a as me,C as We,b as Ge,d as He,E as Qe,L as Je}from"./Layout-1g2spX7c.js";import{S as Xe,C as Ye,a as ye,P as Ne,A as je,F as ee}from"./save-B7b0ONxH.js";import{T as Ze}from"./trending-down-C_pd88Q9.js";import{U as we}from"./users-D4eqFydD.js";import{D as Ke}from"./dollar-sign-CM1P1BqG.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=T("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=T("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=T("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=T("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=T("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=T("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=T("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=T("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),nt=()=>{const[_,Q]=o.useState([]),[D,v]=o.useState([]),[J,O]=o.useState([]),[se,p]=o.useState(!0),[X,g]=o.useState(null),[L,F]=o.useState(null),[V,B]=o.useState(!1),[$,q]=o.useState(!1),[h,U]=o.useState(null),[I,M]=o.useState(null),[m,j]=o.useState({user_id:"",plan_type:"mini-indice",billing_period:"monthly",monthly_value:0,contract_start:"",contract_end:"",is_active:!0}),[f,C]=o.useState({description:"",category:"operacional",amount:0,cost_date:new Date().toISOString().split("T")[0],is_recurring:!1});o.useEffect(()=>{ae()},[]);const ae=async()=>{try{p(!0),await Promise.all([W(),P(),re()])}catch(a){console.error("Error fetching data:",a),g("Erro ao carregar dados")}finally{p(!1)}},W=async()=>{try{console.log("🔍 Fetching contracts...");const{data:a,error:l}=await x.from("client_contracts").select(`
          *,
          user_profiles(full_name, email)
        `).order("created_at",{ascending:!1});if(l){console.error("❌ Error fetching contracts:",l),Q([]);return}console.log("✅ Raw contracts data:",a);const ie=(a||[]).map(y=>{var oe,ce;return{...y,user_name:((oe=y.user_profiles)==null?void 0:oe.full_name)||"Nome não informado",user_email:((ce=y.user_profiles)==null?void 0:ce.email)||"Email não informado"}});console.log("✅ Formatted contracts:",ie),Q(ie)}catch(a){console.error("❌ Catch error fetching contracts:",a),Q([])}},P=async()=>{try{const{data:a,error:l}=await x.from("financial_costs").select("id, description, category, amount, cost_date, is_recurring").order("cost_date",{ascending:!1});if(l){console.error("Error fetching costs:",l),v([]);return}v(a||[])}catch(a){console.error("Error fetching costs:",a),v([])}},re=async()=>{try{const{data:a,error:l}=await x.from("user_profiles").select("id, full_name, email").eq("is_active",!0).order("full_name");if(l){console.error("Error fetching users:",l),O([]);return}O(a||[])}catch(a){console.error("Error fetching users:",a),O([])}},k=async a=>{a.preventDefault();try{if(g(null),console.log("💾 Saving contract...",{editingContract:h,contractForm:m}),h){console.log("📝 Updating existing contract:",h.id);const{error:l}=await x.from("client_contracts").update(m).eq("id",h.id);if(l)throw console.error("❌ Error updating contract:",l),l;console.log("✅ Contract updated successfully"),F("Contrato atualizado com sucesso!")}else{console.log("➕ Creating new contract:",m);const{error:l}=await x.from("client_contracts").insert([m]);if(l)throw console.error("❌ Error creating contract:",l),l;console.log("✅ Contract created successfully"),F("Contrato criado com sucesso!")}B(!1),U(null),u(),await W()}catch(l){console.error("❌ Contract save error:",l),g(l.message)}},xe=async a=>{a.preventDefault();try{if(g(null),I){const{error:l}=await x.from("financial_costs").update(f).eq("id",I.id);if(l)throw l;F("Custo atualizado com sucesso!")}else{const{error:l}=await x.from("financial_costs").insert([f]);if(l)throw l;F("Custo adicionado com sucesso!")}q(!1),M(null),A(),P()}catch(l){g(l.message)}},i=async a=>{if(confirm("Tem certeza que deseja excluir este contrato?"))try{console.log("🗑️ Deleting contract:",a);const{error:l}=await x.from("client_contracts").delete().eq("id",a);if(l)throw console.error("❌ Error deleting contract:",l),l;console.log("✅ Contract deleted successfully"),F("Contrato excluído com sucesso!"),await W()}catch(l){console.error("❌ Contract delete error:",l),g(l.message)}},b=async a=>{if(confirm("Tem certeza que deseja excluir este custo?"))try{const{error:l}=await x.from("financial_costs").delete().eq("id",a);if(l)throw l;F("Custo excluído com sucesso!"),P()}catch(l){g(l.message)}},u=()=>{j({user_id:"",plan_type:"mini-indice",billing_period:"monthly",monthly_value:0,contract_start:"",contract_end:"",is_active:!0})},A=()=>{C({description:"",category:"operacional",amount:0,cost_date:new Date().toISOString().split("T")[0],is_recurring:!1})},Y=a=>{U(a),j({user_id:a.user_id,plan_type:a.plan_type,billing_period:a.billing_period,monthly_value:a.monthly_value,contract_start:a.contract_start,contract_end:a.contract_end,is_active:a.is_active}),B(!0)},ue=a=>{M(a),C({description:a.description,category:a.category,amount:a.amount,cost_date:a.cost_date,is_recurring:a.is_recurring}),q(!0)},Ce=new Date().toISOString().slice(0,7),Z=_.filter(a=>a.is_active),S=Z.reduce((a,l)=>a+l.monthly_value,0),G=D.filter(a=>a.cost_date.startsWith(Ce)||a.is_recurring).reduce((a,l)=>a+l.amount,0),le=S-G,he=a=>({bitcoin:"Bitcoin","mini-indice":"Mini Índice","mini-dolar":"Mini Dólar","portfolio-completo":"Portfólio Completo"})[a]||a,ne=a=>({monthly:"Mensal",semiannual:"Semestral",annual:"Anual"})[a]||a;return se?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Ie,{className:"h-12 w-12 text-green-600 mr-4"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Painel Financeiro"}),e.jsx("p",{className:"text-gray-600",children:"Controle de receitas, custos e contratos"})]})]})}),X&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center",children:[e.jsx(te,{className:"h-5 w-5 mr-2"}),X,e.jsx("button",{onClick:()=>g(null),className:"ml-auto text-red-500 hover:text-red-700",children:"×"})]}),L&&e.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center",children:[e.jsx(Xe,{className:"h-5 w-5 mr-2"}),L,e.jsx("button",{onClick:()=>F(null),className:"ml-auto text-green-500 hover:text-green-700",children:"×"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fe,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Receita Mensal"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["R$ ",S.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ze,{className:"h-8 w-8 text-red-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Custos Mensais"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["R$ ",G.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ye,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Lucro Mensal"}),e.jsxs("p",{className:`text-2xl font-bold ${le>=0?"text-green-600":"text-red-600"}`,children:["R$ ",le.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(we,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Contratos Ativos"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Z.length})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm mb-8",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Contratos dos Clientes"}),e.jsxs("button",{onClick:()=>{u(),U(null),B(!0)},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[e.jsx(ye,{className:"w-4 h-4"}),"Novo Contrato"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Plano"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Modalidade"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Mensal"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Início"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fim"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.user_name}),e.jsx("div",{className:"text-sm text-gray-500",children:a.user_email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:he(a.plan_type)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ne(a.billing_period)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600",children:["R$ ",a.monthly_value.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(a.contract_start).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(a.contract_end).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${a.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.is_active?"Ativo":"Inativo"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>Y(a),className:"text-blue-600 hover:text-blue-800",title:"Editar contrato",children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>i(a.id),className:"text-red-600 hover:text-red-800",title:"Excluir contrato",children:e.jsx(_e,{className:"h-4 w-4"})})]})})]},a.id))})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Custos da Empresa"}),e.jsxs("button",{onClick:()=>{A(),M(null),q(!0)},className:"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors",children:[e.jsx(ye,{className:"w-4 h-4"}),"Novo Custo"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descrição"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categoria"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Recorrente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:a.description}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800",children:a.category})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-red-600",children:["R$ ",a.amount.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(a.cost_date).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${a.is_recurring?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:a.is_recurring?"Sim":"Não"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>ue(a),className:"text-blue-600 hover:text-blue-800",title:"Editar custo",children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>b(a.id),className:"text-red-600 hover:text-red-800",title:"Excluir custo",children:e.jsx(_e,{className:"h-4 w-4"})})]})})]},a.id))})]})})]}),V&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:h?"Editar Contrato":"Novo Contrato"}),e.jsx("button",{onClick:()=>{B(!1),U(null),u()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(te,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:k,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente *"}),e.jsxs("select",{value:m.user_id,onChange:a=>j({...m,user_id:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900",required:!0,children:[e.jsx("option",{value:"",children:"Selecione um cliente"}),J.map(a=>e.jsxs("option",{value:a.id,children:[a.full_name||a.email||"Usuário sem nome"," (",a.email,")"]},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plano *"}),e.jsxs("select",{value:m.plan_type,onChange:a=>j({...m,plan_type:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"bitcoin",children:"Bitcoin"}),e.jsx("option",{value:"mini-indice",children:"Mini Índice"}),e.jsx("option",{value:"mini-dolar",children:"Mini Dólar"}),e.jsx("option",{value:"portfolio-completo",children:"Portfólio Completo"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Modalidade *"}),e.jsxs("select",{value:m.billing_period,onChange:a=>j({...m,billing_period:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"monthly",children:"Mensal"}),e.jsx("option",{value:"semiannual",children:"Semestral"}),e.jsx("option",{value:"annual",children:"Anual"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor Mensal (R$) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",value:m.monthly_value,onChange:a=>j({...m,monthly_value:parseFloat(a.target.value)||0}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",required:!0}),m.monthly_value<=0&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:"Valor deve ser maior que zero"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Início do Contrato *"}),e.jsx("input",{type:"date",value:m.contract_start,onChange:a=>j({...m,contract_start:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:new Date().toISOString().split("T")[0],required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fim do Contrato *"}),e.jsx("input",{type:"date",value:m.contract_end,onChange:a=>j({...m,contract_end:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:m.contract_start||new Date().toISOString().split("T")[0],required:!0}),m.contract_end&&m.contract_start&&new Date(m.contract_end)<=new Date(m.contract_start)&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:"Data de fim deve ser posterior ao início"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"contract_active",checked:m.is_active,onChange:a=>j({...m,is_active:a.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"contract_active",className:"ml-2 text-sm text-gray-700",children:"Contrato ativo"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg transition-colors",children:h?"Atualizar Contrato":"Criar Contrato"}),e.jsx("button",{type:"button",onClick:()=>{B(!1),U(null),u()},className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white px-4 py-3 rounded-lg transition-colors",children:"Cancelar"})]})]})]})}),$&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:I?"Editar Custo":"Novo Custo"}),e.jsx("button",{onClick:()=>{q(!1),M(null),A()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(te,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:xe,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrição *"}),e.jsx("input",{type:"text",value:f.description,onChange:a=>C({...f,description:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descrição do custo",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoria *"}),e.jsxs("select",{value:f.category,onChange:a=>C({...f,category:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"operacional",children:"Operacional"}),e.jsx("option",{value:"marketing",children:"Marketing"}),e.jsx("option",{value:"tecnologia",children:"Tecnologia"}),e.jsx("option",{value:"pessoal",children:"Pessoal"}),e.jsx("option",{value:"infraestrutura",children:"Infraestrutura"}),e.jsx("option",{value:"outros",children:"Outros"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor (R$) *"}),e.jsx("input",{type:"number",step:"0.01",value:f.amount,onChange:a=>C({...f,amount:parseFloat(a.target.value)||0}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data *"}),e.jsx("input",{type:"date",value:f.cost_date,onChange:a=>C({...f,cost_date:a.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"cost_recurring",checked:f.is_recurring,onChange:a=>C({...f,is_recurring:a.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"cost_recurring",className:"ml-2 text-sm text-gray-700",children:"Custo recorrente (mensal)"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-3 rounded-lg transition-colors",children:I?"Atualizar Custo":"Adicionar Custo"}),e.jsx("button",{type:"button",onClick:()=>{q(!1),M(null),A()},className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white px-4 py-3 rounded-lg transition-colors",children:"Cancelar"})]})]})]})})]})})},it=()=>{var Ee,De,Ue;const[_,Q]=o.useState([]),[D,v]=o.useState(!0),[J,O]=o.useState("users"),[se,p]=o.useState(null),[X,g]=o.useState(null),[L,F]=o.useState(""),[V,B]=o.useState("all"),[$,q]=o.useState({start:"",end:""}),[h,U]=o.useState([]),[I,M]=o.useState(!1),[m,j]=o.useState(!1),[f,C]=o.useState(null),[ae,W]=o.useState(!1),[P,re]=o.useState(""),[k,xe]=o.useState({key:"",direction:null}),[i,b]=o.useState({full_name:"",email:"",phone:"",password:"",is_active:!0,leverage_multiplier:1,contracted_plan:"none"}),[u,A]=o.useState({}),[Y,ue]=o.useState(!1),[Ce,Z]=o.useState(!1),[S,G]=o.useState([{column:"status",values:[],isOpen:!1},{column:"plan",values:[],isOpen:!1},{column:"leverage",values:[],isOpen:!1},{column:"verification",values:[],isOpen:!1}]);o.useEffect(()=>{ie(),y()},[]);const le=t=>{if(!t)return"";const s=t.replace(/\D/g,"");if(s.startsWith("55")&&s.length>=13){const r=s.slice(0,2),c=s.slice(2,4),d=s.slice(4,9),n=s.slice(9,13);return`+${r} (${c}) ${d}-${n}`}return t},he=t=>{if(!t)return"Nunca";const s=new Date(t),r=s.getDate().toString().padStart(2,"0"),c=(s.getMonth()+1).toString().padStart(2,"0"),d=s.getFullYear(),n=s.getHours().toString().padStart(2,"0"),N=s.getMinutes().toString().padStart(2,"0");return`${r}/${c}/${d} ${n}:${N}`},ne=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),a=t=>{const s=t.replace(/\D/g,"");return s.length>=10&&s.length<=13},l=(t,s=!1)=>{const r={};return s?(t.email.trim()&&!ne(t.email)&&(r.email="Email inválido"),t.phone.trim()&&!a(t.phone)&&(r.phone="Telefone inválido")):(t.full_name.trim()||(r.full_name="Nome completo é obrigatório"),t.email.trim()?ne(t.email)||(r.email="Email inválido"):r.email="Email é obrigatório",t.phone.trim()?a(t.phone)||(r.phone="Telefone inválido"):r.phone="Telefone é obrigatório",t.password.trim()?t.password.length<6&&(r.password="Senha deve ter pelo menos 6 caracteres"):r.password="Senha é obrigatória"),(t.leverage_multiplier<1||t.leverage_multiplier>5)&&(r.leverage_multiplier="Alavancagem deve estar entre 1x e 5x"),r},ie=async()=>{try{const{data:{user:t}}=await x.auth.getUser();Z((t==null?void 0:t.email)==="pedropardal04@gmail.com")}catch(t){console.error("Error checking admin status:",t),Z(!1)}},y=async()=>{var t;try{v(!0);let s=[];try{const{data:n,error:N}=await x.rpc("get_all_users_with_profiles");if(!N&&n)s=n,console.log("Users from function:",s.length);else throw N||new Error("Function returned no data")}catch(n){console.warn("Custom function failed, falling back to user_profiles:",n);const{data:N,error:w}=await x.from("user_profiles").select("*").order("created_at",{ascending:!1});if(w)throw w;s=N||[]}const{data:{user:r}}=await x.auth.getUser();if(r&&r.email==="pedropardal04@gmail.com"&&!s.find(n=>n.id===r.id)){const{error:n}=await x.from("user_profiles").insert({id:r.id,email:r.email,phone:r.phone||null,leverage_multiplier:5,is_active:!0,contracted_plan:"none"});n||s.unshift({id:r.id,email:r.email,phone:r.phone||null,full_name:((t=r.user_metadata)==null?void 0:t.full_name)||"",created_at:r.created_at,last_sign_in_at:null,email_confirmed_at:r.email_confirmed_at,phone_confirmed_at:r.phone_confirmed_at,leverage_multiplier:5,is_active:!0,contracted_plan:"none"})}const c=s.filter(n=>!n.leverage_multiplier&&(n.email||n.phone));if(c.length>0){console.log("Creating profiles for users without them:",c.length);const n=c.map(w=>({id:w.id,email:w.email||"",phone:w.phone||"",full_name:w.full_name||"",leverage_multiplier:1,is_active:!0,contracted_plan:"none"})),{error:N}=await x.from("user_profiles").insert(n);N||c.forEach(w=>{w.leverage_multiplier=1,w.is_active=!0,w.contracted_plan="none"})}const d=s.map(n=>({id:n.id,full_name:n.full_name||"",email:n.email||"",phone:n.phone||"",created_at:n.created_at,last_sign_in_at:n.last_sign_in_at,leverage_multiplier:n.leverage_multiplier||1,is_active:n.is_active!==!1,contracted_plan:n.contracted_plan||"none",email_confirmed_at:n.email_confirmed_at,phone_confirmed_at:n.phone_confirmed_at}));console.log("Users found:",d.length),console.log("Users with phones:",d.filter(n=>n.phone).length),console.log("Users with emails:",d.filter(n=>n.email).length),Q(d)}catch(s){console.error("Error fetching users:",s),p("Erro ao carregar usuários")}finally{v(!1)}},oe=async t=>{t.preventDefault();const s=l(i);if(Object.keys(s).length>0){A(s);return}try{v(!0);const{data:r}=await x.from("user_profiles").select("email, phone").or(`email.eq.${i.email},phone.eq.${i.phone}`).maybeSingle();if(r){if(r.email===i.email){A({email:"Email já está em uso"});return}if(r.phone===i.phone){A({phone:"Telefone já está em uso"});return}}const{data:c,error:d}=await x.auth.signUp({email:i.email,password:i.password,options:{data:{full_name:i.full_name,phone:i.phone}}});if(d)throw d;if(c.user){const{error:n}=await x.from("user_profiles").insert({id:c.user.id,full_name:i.full_name,email:i.email,phone:i.phone,leverage_multiplier:i.leverage_multiplier,is_active:i.is_active,contracted_plan:i.contracted_plan});if(n)throw n;g("Usuário criado com sucesso!"),M(!1),H(),y()}}catch(r){console.error("Error adding user:",r),p(r.message||"Erro ao criar usuário")}finally{v(!1)}},ce=async t=>{if(t.preventDefault(),!f)return;const s=l(i,!0);if(Object.keys(s).length>0){A(s);return}try{p(null),A({}),console.log("Updating user:",f.id,"with data:",i),v(!0);const{error:r}=await x.from("user_profiles").update({full_name:i.full_name,phone:i.phone,leverage_multiplier:i.leverage_multiplier,is_active:i.is_active,contracted_plan:i.contracted_plan}).eq("id",f.id);if(console.log("Update user result:",{error:r}),r)throw console.error("Supabase update error:",r),r;console.log("User updated successfully"),g("Usuário atualizado com sucesso!"),j(!1),C(null),H(),y()}catch(r){console.error("Error updating user:",r),p((r==null?void 0:r.message)||"Erro ao atualizar usuário")}finally{v(!1)}},Pe=async t=>{if(confirm("Tem certeza que deseja excluir este usuário?"))try{p(null),console.log("Deleting user:",t);const{error:s}=await x.from("user_profiles").delete().eq("id",t);if(console.log("Delete user result:",{error:s}),s)throw s;g("Usuário excluído com sucesso!"),await y()}catch(s){console.error("Error deleting user:",s),p((s==null?void 0:s.message)||"Erro ao excluir usuário")}},$e=async(t,s)=>{try{console.log("Toggling user status:",{userId:t,newStatus:s}),p(null);const{error:r}=await x.from("user_profiles").update({is_active:s}).eq("id",t);if(r)throw console.error("Supabase status error:",r),r;g(`Usuário ${s?"ativado":"desativado"} com sucesso!`),y()}catch(r){console.error("Error updating user status:",r),p((r==null?void 0:r.message)||"Erro ao atualizar status do usuário")}},ke=async(t,s)=>{try{p(null),console.log("Updating leverage for user:",t,"to:",s),console.log("🔧 Iniciando atualização de alavancagem:",{userId:t,newLeverage:s});const{data:r,error:c}=await x.from("user_profiles").select("id, leverage_multiplier, email").eq("id",t);if(c)throw console.error("❌ Error checking user:",c),new Error("Erro ao verificar usuário: "+c.message);if(!r||r.length===0)throw console.error("❌ User not found:",t),new Error("Usuário não encontrado");console.log("👤 User found:",r[0]);const{error:d}=await x.from("user_profiles").update({leverage_multiplier:s}).eq("id",t);if(d)throw console.error("❌ Error updating leverage:",d),d;console.log("✅ Leverage updated successfully"),await y(),g(`Alavancagem atualizada para ${s}x com sucesso!`),y()}catch(r){console.error("Error updating leverage:",r),p(r.message||"Erro ao atualizar alavancagem")}},qe=async(t,s)=>{try{g(`Email de redefinição de senha enviado para ${s}`)}catch(r){console.error("Error resetting password:",r),p("Erro ao redefinir senha")}},H=()=>{b({full_name:"",email:"",phone:"",password:"",is_active:!0,leverage_multiplier:1,contracted_plan:"none"}),A({})},Te=t=>{C(t),b({full_name:t.full_name||"",email:t.email,phone:t.phone||"",password:"",is_active:t.is_active,leverage_multiplier:t.leverage_multiplier,contracted_plan:t.contracted_plan}),j(!0)},pe=t=>{G(s=>s.map(r=>r.column===t?{...r,isOpen:!r.isOpen}:{...r,isOpen:!1}))},ge=(t,s,r)=>{G(c=>c.map(d=>d.column===t?{...d,values:r?[...d.values,s]:d.values.filter(n=>n!==s)}:d))},fe=t=>{G(s=>s.map(r=>r.column===t?{...r,values:[]}:r))},be=t=>{switch(t){case"status":return["Ativo","Inativo"];case"plan":return["Nenhum","Bitcoin","Mini Índice","Mini Dólar","Portfólio Completo"];case"leverage":return["1x","2x","3x","4x","5x"];case"verification":return["Email Verificado","Email Não Verificado","Telefone Verificado","Telefone Não Verificado"];default:return[]}},Le=t=>{if(!t.phone){alert("Usuário não possui telefone cadastrado");return}const s=t.phone.replace(/\D/g,""),r=t.full_name||"Cliente",c=encodeURIComponent(`Olá ${r}! 👋

Sou da equipe Quant Broker e estou entrando em contato sobre seus Portfólios de IA.

Como posso ajudá-lo hoje?

📊 Dúvidas sobre performance
⚙️ Configurações de conta
📈 Alavancagem e estratégias
🎯 Suporte técnico

Estou aqui para ajudar!`),d=`https://wa.me/${s}?text=${c}`;window.open(d,"_blank")},R=t=>{let s="asc";k.key===t&&(k.direction==="asc"?s="desc":k.direction==="desc"?s=null:s="asc"),xe({key:t,direction:s})},z=t=>k.key!==t?e.jsx(Me,{className:"h-4 w-4 text-gray-400"}):k.direction==="asc"?e.jsx(tt,{className:"h-4 w-4 text-blue-600"}):k.direction==="desc"?e.jsx(et,{className:"h-4 w-4 text-blue-600"}):e.jsx(Me,{className:"h-4 w-4 text-gray-400"});let E=_.filter(t=>{var Ae;const s=((Ae=t.full_name)==null?void 0:Ae.toLowerCase().includes(L.toLowerCase()))||t.email.toLowerCase().includes(L.toLowerCase())||t.phone&&t.phone.includes(L),r=V==="all"||V==="active"&&t.is_active||V==="inactive"&&!t.is_active,c=!$.start||!$.end||new Date(t.created_at)>=new Date($.start)&&new Date(t.created_at)<=new Date($.end),d=S.find(K=>K.column==="status"),n=!(d!=null&&d.values.length)||d.values.includes(t.is_active?"Ativo":"Inativo"),N=S.find(K=>K.column==="plan"),w=!(N!=null&&N.values.length)||N.values.includes(ve(t.contracted_plan)),de=S.find(K=>K.column==="leverage"),Ve=!(de!=null&&de.values.length)||de.values.includes(`${t.leverage_multiplier}x`);return s&&r&&c&&n&&w&&Ve});k.direction&&(E=[...E].sort((t,s)=>{let r="",c="";switch(k.key){case"full_name":r=t.full_name||"",c=s.full_name||"";break;case"email":r=t.email||"",c=s.email||"";break;case"phone":r=t.phone||"",c=s.phone||"";break;case"is_active":r=t.is_active?1:0,c=s.is_active?1:0;break;case"leverage_multiplier":r=t.leverage_multiplier,c=s.leverage_multiplier;break;case"contracted_plan":r=t.contracted_plan||"",c=s.contracted_plan||"";break;case"created_at":r=new Date(t.created_at),c=new Date(s.created_at);break;case"last_sign_in_at":r=t.last_sign_in_at?new Date(t.last_sign_in_at):new Date(0),c=s.last_sign_in_at?new Date(s.last_sign_in_at):new Date(0);break;default:return 0}return r<c?k.direction==="asc"?-1:1:r>c?k.direction==="asc"?1:-1:0}));const Be=t=>{U(s=>s.includes(t)?s.filter(r=>r!==t):[...s,t])},Se=()=>{U(h.length===E.length?[]:E.map(t=>t.id))},Re=async()=>{if(!(!P||h.length===0))try{v(!0);const{error:t}=await x.from("user_profiles").update({contracted_plan:P}).in("id",h);if(t)throw t;g(`Plano ${ve(P)} aplicado a ${h.length} usuários!`),U([]),re(""),W(!1),y()}catch{p("Erro ao atualizar planos em lote")}finally{v(!1)}},ze=async()=>{const t=E.filter(s=>h.includes(s.id)&&s.contracted_plan==="none");if(t.length===0){p("Nenhum lead selecionado para exclusão");return}if(confirm(`Tem certeza que deseja excluir ${t.length} leads (usuários sem plano)?`))try{v(!0);const{error:s}=await x.from("user_profiles").delete().in("id",t.map(r=>r.id));if(s)throw s;g(`${t.length} leads excluídos com sucesso!`),U([]),y()}catch{p("Erro ao excluir leads")}finally{v(!1)}},ve=t=>{switch(t){case"bitcoin":return"Bitcoin";case"mini-indice":return"Mini Índice";case"mini-dolar":return"Mini Dólar";case"portfolio-completo":return"Portfólio Completo";case"none":return"Nenhum";default:return t}},Oe=t=>{switch(t){case"bitcoin":return"bg-orange-100 text-orange-800";case"mini-indice":return"bg-blue-100 text-blue-800";case"mini-dolar":return"bg-green-100 text-green-800";case"portfolio-completo":return"bg-purple-100 text-purple-800";case"none":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return D&&_.length===0?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>O("users"),className:`py-2 px-1 border-b-2 font-medium text-sm ${J==="users"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Gestão de Usuários"}),e.jsxs("button",{onClick:()=>O("financial"),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${J==="financial"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Ke,{className:"h-4 w-4"}),"Painel Financeiro"]})]})})}),J==="financial"?e.jsx(nt,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("img",{src:"https://i.postimg.cc/5tjcZ4qJ/Chat-GPT-Image-12-de-jul-de-2025-21-56-40.png",alt:"Quant Broker Logo",className:"h-12 w-12 mr-4 rounded-lg shadow-sm"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Painel Administrativo"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie usuários e configurações de alavancagem"})]})]})}),se&&e.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center",children:[e.jsx(je,{className:"h-5 w-5 mr-2"}),se,e.jsx("button",{onClick:()=>p(null),className:"ml-auto text-red-500 hover:text-red-700",children:"×"})]}),X&&e.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center",children:[e.jsx(me,{className:"h-5 w-5 mr-2"}),X,e.jsx("button",{onClick:()=>g(null),className:"ml-auto text-green-500 hover:text-green-700",children:"×"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx(rt,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nome, email ou telefone...",value:L,onChange:t=>F(t.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full sm:w-80"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5 text-gray-400"}),e.jsxs("select",{value:V,onChange:t=>B(t.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"active",children:"Ativos"}),e.jsx("option",{value:"inactive",children:"Inativos"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(We,{className:"h-5 w-5 text-gray-400"}),e.jsx("input",{type:"date",value:$.start,onChange:t=>q(s=>({...s,start:t.target.value})),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("span",{className:"text-gray-500",children:"até"}),e.jsx("input",{type:"date",value:$.end,onChange:t=>q(s=>({...s,end:t.target.value})),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("button",{onClick:()=>M(!0),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[e.jsx(lt,{className:"w-4 h-4"}),"Adicionar Usuário"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(we,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total de Usuários"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Usuários Ativos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.filter(t=>t.is_active).length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fe,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Alavancagem Média"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[_.length>0?(_.reduce((t,s)=>t+s.leverage_multiplier,0)/_.length).toFixed(1):"0","x"]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ee,{className:"h-8 w-8 text-orange-600"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Filtrados"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E.length})]})]})})]}),ae&&h.length>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg mb-4",children:[e.jsxs("h3",{className:"font-semibold text-blue-900 mb-3",children:["Ações em Lote (",h.length," usuários selecionados)"]}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-blue-800",children:"Alterar Plano:"}),e.jsxs("select",{value:P,onChange:t=>re(t.target.value),className:"border border-blue-300 rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"",children:"Selecione um plano"}),e.jsx("option",{value:"none",children:"Nenhum"}),e.jsx("option",{value:"bitcoin",children:"Bitcoin"}),e.jsx("option",{value:"mini-indice",children:"Mini Índice"}),e.jsx("option",{value:"mini-dolar",children:"Mini Dólar"}),e.jsx("option",{value:"portfolio-completo",children:"Portfólio Completo"})]}),e.jsx("button",{onClick:Re,disabled:!P||D,className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 disabled:opacity-50",children:"Aplicar"})]}),e.jsxs("div",{className:"border-l border-blue-300 pl-4",children:[e.jsx("button",{onClick:ze,disabled:D,className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 disabled:opacity-50",children:"Excluir Leads Selecionados"}),e.jsx("p",{className:"text-xs text-red-700 mt-1",children:"Remove apenas usuários sem plano contratado"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Usuários"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Total: ",_.length," | Filtrados: ",E.length]}),h.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[h.length," selecionados"]}),e.jsx("button",{onClick:()=>U([]),className:"text-sm text-blue-600 hover:text-blue-800",children:"Limpar seleção"})]}),e.jsx("button",{onClick:Se,className:"text-sm text-blue-600 hover:text-blue-800",children:h.length===E.length?"Desmarcar todos":"Selecionar todos"}),e.jsx("button",{onClick:()=>W(!ae),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700",children:"Ações em Lote"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",checked:h.length===E.length&&E.length>0,onChange:Se,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[200px]",children:e.jsxs("button",{onClick:()=>R("full_name"),className:"flex items-center space-x-1 hover:text-gray-700 transition-colors",children:[e.jsx("span",{children:"Nome / Email"}),z("full_name")]})}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:e.jsxs("button",{onClick:()=>R("phone"),className:"flex items-center space-x-1 hover:text-gray-700 transition-colors",children:[e.jsx("span",{children:"Telefone"}),z("phone")]})}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>R("is_active"),className:"flex items-center space-x-1 hover:text-gray-700 transition-colors",children:[e.jsx("span",{children:"Status"}),z("is_active")]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>pe("status"),className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(ee,{className:"h-3 w-3"})}),((Ee=S.find(t=>t.column==="status"))==null?void 0:Ee.isOpen)&&e.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 min-w-[150px]",children:e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs font-medium",children:"Filtrar Status"}),e.jsx("button",{onClick:()=>fe("status"),className:"text-xs text-blue-600 hover:text-blue-800",children:"Limpar"})]}),be("status").map(t=>{var s;return e.jsxs("label",{className:"flex items-center gap-2 py-1",children:[e.jsx("input",{type:"checkbox",checked:((s=S.find(r=>r.column==="status"))==null?void 0:s.values.includes(t))||!1,onChange:r=>ge("status",t,r.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm",children:t})]},t)})]})})]})]})}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>R("leverage_multiplier"),className:"flex items-center space-x-1 hover:text-gray-700 transition-colors",children:[e.jsx("span",{children:"Alavancagem"}),z("leverage_multiplier")]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>pe("leverage"),className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(ee,{className:"h-3 w-3"})}),((De=S.find(t=>t.column==="leverage"))==null?void 0:De.isOpen)&&e.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 min-w-[150px]",children:e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs font-medium",children:"Filtrar Alavancagem"}),e.jsx("button",{onClick:()=>fe("leverage"),className:"text-xs text-blue-600 hover:text-blue-800",children:"Limpar"})]}),be("leverage").map(t=>{var s;return e.jsxs("label",{className:"flex items-center gap-2 py-1",children:[e.jsx("input",{type:"checkbox",checked:((s=S.find(r=>r.column==="leverage"))==null?void 0:s.values.includes(t))||!1,onChange:r=>ge("leverage",t,r.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm",children:t})]},t)})]})})]})]})}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-28",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>R("contracted_plan"),className:"flex items-center space-x-1 hover:text-gray-700 transition-colors",children:[e.jsx("span",{children:"Plano"}),z("contracted_plan")]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>pe("plan"),className:"p-1 hover:bg-gray-200 rounded",children:e.jsx(ee,{className:"h-3 w-3"})}),((Ue=S.find(t=>t.column==="plan"))==null?void 0:Ue.isOpen)&&e.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 min-w-[150px]",children:e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs font-medium",children:"Filtrar Plano"}),e.jsx("button",{onClick:()=>fe("plan"),className:"text-xs text-blue-600 hover:text-blue-800",children:"Limpar"})]}),be("plan").map(t=>{var s;return e.jsxs("label",{className:"flex items-center gap-2 py-1",children:[e.jsx("input",{type:"checkbox",checked:((s=S.find(r=>r.column==="plan"))==null?void 0:s.values.includes(t))||!1,onChange:r=>ge("plan",t,r.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm",children:t})]},t)})]})})]})]})}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:e.jsxs("button",{onClick:()=>R("created_at"),className:"flex items-center space-x-1 hover:text-gray-700 transition-colors",children:[e.jsx("span",{children:"Cadastro"}),z("created_at")]})}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:e.jsxs("button",{onClick:()=>R("last_sign_in_at"),className:"flex items-center space-x-1 hover:text-gray-700 transition-colors",children:[e.jsx("span",{children:"Último Login"}),z("last_sign_in_at")]})}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Ações"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:h.includes(t.id),onChange:()=>Be(t.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:(t.full_name||t.email).charAt(0).toUpperCase()}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 max-w-[180px] truncate",children:t.full_name||"Nome não informado"}),e.jsx("div",{className:"text-xs text-gray-500 max-w-[180px] truncate",children:t.email}),e.jsxs("div",{className:"text-xs text-gray-400 flex items-center mt-1",children:[t.email_confirmed_at?e.jsx(me,{className:"w-3 h-3 text-green-500 mr-1"}):e.jsx(je,{className:"w-3 h-3 text-yellow-500 mr-1"}),t.email_confirmed_at?"Verificado":"Não verificado"]})]})]})}),e.jsxs("td",{className:"px-3 py-3",children:[e.jsx("div",{className:"text-xs text-gray-900",children:le(t.phone||"")}),t.phone_confirmed_at?e.jsxs("div",{className:"text-xs text-green-600 flex items-center mt-1",children:[e.jsx(me,{className:"w-3 h-3 mr-1"}),"✓"]}):t.phone?e.jsxs("div",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[e.jsx(je,{className:"w-3 h-3 mr-1"}),"!"]}):null]}),e.jsx("td",{className:"px-3 py-3",children:e.jsx("button",{onClick:()=>$e(t.id,!t.is_active),className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${t.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200"}`,children:t.is_active?"Ativo":"Inativo"})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>ke(t.id,Math.max(1,t.leverage_multiplier-1)),className:"p-1 text-red-600 hover:text-red-800",disabled:t.leverage_multiplier<=1,title:"Diminuir alavancagem",children:e.jsx(at,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-xs font-medium text-gray-900 min-w-[2rem] text-center",children:[t.leverage_multiplier,"x"]}),e.jsx("button",{onClick:()=>ke(t.id,Math.min(5,t.leverage_multiplier+1)),className:"p-1 text-green-600 hover:text-green-800",disabled:t.leverage_multiplier>=5,title:"Aumentar alavancagem",children:e.jsx(ye,{className:"h-4 w-4"})})]})}),e.jsx("td",{className:"px-3 py-3",children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${Oe(t.contracted_plan)}`,children:ve(t.contracted_plan)})})}),e.jsx("td",{className:"px-3 py-3 text-xs text-gray-500",children:new Date(t.created_at).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-3 py-3 text-xs text-gray-500",children:he(t.last_sign_in_at)}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[t.phone&&e.jsx("button",{onClick:()=>Le(t),className:"p-2 text-green-600 hover:text-green-800 bg-green-50 hover:bg-green-100 rounded-lg transition-colors",title:"Enviar WhatsApp",children:e.jsx(Ge,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Te(t),className:"text-blue-600 hover:text-blue-800",title:"Editar usuário",children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>qe(t.id,t.email),className:"text-yellow-600 hover:text-yellow-800",title:"Redefinir senha",children:e.jsx(st,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Pe(t.id),className:"text-red-600 hover:text-red-800",title:"Excluir usuário",children:e.jsx(_e,{className:"h-4 w-4"})})]})})]},t.id))})]})}),E.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(we,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:D?"Carregando usuários...":_.length===0?"Nenhum usuário cadastrado":"Nenhum usuário encontrado com os filtros aplicados"})]})]}),I&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Adicionar Novo Usuário"}),e.jsx("button",{onClick:()=>{M(!1),H()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(te,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:oe,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo *"}),e.jsx("input",{type:"text",value:i.full_name,onChange:t=>b(s=>({...s,full_name:t.target.value})),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.full_name?"border-red-300":"border-gray-300"}`,placeholder:"Nome completo do usuário"}),u.full_name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:u.full_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:i.email,onChange:t=>b(s=>({...s,email:t.target.value})),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.email?"border-red-300":"border-gray-300"}`,placeholder:"email@exemplo.com"}),u.email&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:u.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone"}),e.jsx("input",{type:"tel",value:i.phone,onChange:t=>b(s=>({...s,phone:t.target.value})),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.phone?"border-red-300":"border-gray-300"}`,placeholder:"(11) 99999-9999"}),u.phone&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:u.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:Y?"text":"password",value:i.password,onChange:t=>b(s=>({...s,password:t.target.value})),className:`w-full px-4 py-3 pr-12 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.password?"border-red-300":"border-gray-300"}`,placeholder:"••••••••"}),e.jsx("button",{type:"button",onClick:()=>ue(!Y),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:Y?e.jsx(He,{className:"h-5 w-5"}):e.jsx(Qe,{className:"h-5 w-5"})})]}),u.password&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:u.password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alavancagem"}),e.jsxs("select",{value:i.leverage_multiplier,onChange:t=>b(s=>({...s,leverage_multiplier:parseInt(t.target.value)})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:1,children:"1x"}),e.jsx("option",{value:2,children:"2x"}),e.jsx("option",{value:3,children:"3x"}),e.jsx("option",{value:4,children:"4x"}),e.jsx("option",{value:5,children:"5x"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plano Contratado"}),e.jsxs("select",{value:i.contracted_plan,onChange:t=>b(s=>({...s,contracted_plan:t.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"none",children:"Nenhum"}),e.jsx("option",{value:"bitcoin",children:"Bitcoin"}),e.jsx("option",{value:"mini-indice",children:"Mini Índice"}),e.jsx("option",{value:"mini-dolar",children:"Mini Dólar"}),e.jsx("option",{value:"portfolio-completo",children:"Portfólio Completo"})]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:i.is_active,onChange:t=>b(s=>({...s,is_active:t.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm text-gray-700",children:"Conta ativa"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:D,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg transition-colors disabled:opacity-50",children:D?"Criando...":"Criar Usuário"}),e.jsx("button",{type:"button",onClick:()=>{M(!1),H()},className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white px-4 py-3 rounded-lg transition-colors",children:"Cancelar"})]})]})]})}),m&&f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Editar Usuário"}),e.jsx("button",{onClick:()=>{j(!1),C(null),H()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(te,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:ce,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo *"}),e.jsx("input",{type:"text",value:i.full_name,onChange:t=>b(s=>({...s,full_name:t.target.value})),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.full_name?"border-red-300":"border-gray-300"}`,placeholder:"Nome completo do usuário"}),u.full_name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:u.full_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:i.email,onChange:t=>b(s=>({...s,email:t.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-100",placeholder:"email@exemplo.com",disabled:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email não pode ser alterado após criação"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone *"}),e.jsx("input",{type:"tel",value:i.phone,onChange:t=>b(s=>({...s,phone:t.target.value})),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.phone?"border-red-300":"border-gray-300"}`,placeholder:"(11) 99999-9999"}),u.phone&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:u.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alavancagem"}),e.jsxs("select",{value:i.leverage_multiplier,onChange:t=>b(s=>({...s,leverage_multiplier:parseInt(t.target.value)})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:1,children:"1x"}),e.jsx("option",{value:2,children:"2x"}),e.jsx("option",{value:3,children:"3x"}),e.jsx("option",{value:4,children:"4x"}),e.jsx("option",{value:5,children:"5x"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plano Contratado"}),e.jsxs("select",{value:i.contracted_plan,onChange:t=>b(s=>({...s,contracted_plan:t.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"none",children:"Nenhum"}),e.jsx("option",{value:"bitcoin",children:"Bitcoin"}),e.jsx("option",{value:"mini-indice",children:"Mini Índice"}),e.jsx("option",{value:"mini-dolar",children:"Mini Dólar"}),e.jsx("option",{value:"portfolio-completo",children:"Portfólio Completo"})]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"edit_is_active",checked:i.is_active,onChange:t=>b(s=>({...s,is_active:t.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"edit_is_active",className:"ml-2 text-sm text-gray-700",children:"Conta ativa"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:D,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg transition-colors disabled:opacity-50",children:D?"Salvando...":"Salvar Alterações"}),e.jsx("button",{type:"button",onClick:()=>{j(!1),C(null),H()},className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white px-4 py-3 rounded-lg transition-colors",children:"Cancelar"})]})]})]})})]})]})})},ht=()=>e.jsx(Je,{children:e.jsx(it,{})});export{ht as default};
