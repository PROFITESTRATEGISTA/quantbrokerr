import{R as ye,j as e,r as d,s as Y}from"./index-lOzlCrbJ.js";import{T as K,X as he,C as Z,L as Ne}from"./Layout-CkSYhl89.js";import{B as ee}from"./bar-chart-3-Dmr6tGfK.js";import{R as we,L as Me,C as oe,X as ce,Y as de,T as xe,a as ae,B as De,b as ke,c as Se,S as pe,P as ie,F as me,A as ue,d as re}from"./BarChart-BmgOUTnv.js";import{T as ge}from"./trending-down-BuRt7hRh.js";import{S as le}from"./shield-DUoctm3n.js";const Re=({data:M,asset:u,year:b})=>{const[p,G]=ye.useState("line"),f=M.length===0,D=M.filter(l=>l.year===b).sort((l,h)=>{const v=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];return v.indexOf(l.month)-v.indexOf(h.month)}).map((l,h,v)=>{const S=l[u]||0,V=h===0?S:v.slice(0,h+1).reduce((N,T)=>N+(T[u]||0),0);return{month:l.month.substring(0,3),monthlyValue:S,cumulativeValue:V,fullMonth:l.month,resultType:l.resultType||"live"}});D.length>0&&p==="line"&&D.unshift({month:"Início",monthlyValue:0,cumulativeValue:0,fullMonth:"Início"});const E={bitcoin:{positive:"#22c55e",negative:"#ef4444"},miniIndice:{positive:"#22c55e",negative:"#ef4444"},miniDolar:{positive:"#22c55e",negative:"#ef4444"},portfolio:{positive:"#22c55e",negative:"#ef4444"}},_={bitcoin:"Bitcoin",miniIndice:"Mini Índice",miniDolar:"Mini Dólar",portfolio:"Portfólio Completo"},g=({active:l,payload:h,label:v})=>{if(l&&h&&h.length){const S=h[0].payload,V=p==="line",N=V?S.cumulativeValue:S.monthlyValue,T=V?"Evolução Acumulada":"Resultado Mensal",y=S.resultType==="backtest";return e.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[e.jsx("p",{className:"font-medium text-gray-900",children:`${v} ${b}`}),e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${y?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"}`,children:y?"Backtest":"Ao Vivo"})}),e.jsx("p",{className:"text-sm text-gray-600",children:T}),e.jsx("p",{className:`font-bold ${N>=0?"text-green-600":"text-red-600"}`,children:`${N>=0?"+":""}${N.toFixed(1)}%`})]})}return null},O=l=>`${l}%`;return e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:[p==="line"?"Evolução Acumulada":"Resultados Mensais"," ",b," - ",_[u]]}),e.jsx("p",{className:"text-gray-600",children:p==="line"?"Evolução acumulada dos resultados ao longo do ano":"Resultados individuais por mês"})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4 sm:mt-0",children:[e.jsx("button",{onClick:()=>G("line"),className:`p-2 rounded-lg transition-colors ${p==="line"?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:"Gráfico de Linha",children:e.jsx(K,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>G("bar"),className:`p-2 rounded-lg transition-colors ${p==="bar"?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:"Gráfico de Barras",children:e.jsx(ee,{className:"h-5 w-5"})})]})]}),f?e.jsx("div",{className:"h-80 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(K,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aguardando Dados de Produção"}),e.jsx("p",{className:"text-gray-600",children:"O gráfico será exibido quando os primeiros resultados forem inseridos"})]})}):e.jsx("div",{className:"h-80",children:e.jsx(we,{width:"100%",height:"100%",children:p==="line"?e.jsxs(Me,{data:D,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(oe,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),e.jsx(ce,{dataKey:"month",stroke:"#64748b",fontSize:12}),e.jsx(de,{stroke:"#64748b",fontSize:12,tickFormatter:O,domain:["dataMin","dataMax"]}),e.jsx(xe,{content:e.jsx(g,{})}),e.jsx(ae,{type:"monotone",dataKey:"cumulativeValue",stroke:"#6b7280",strokeWidth:6,dot:l=>{const{cx:h,cy:v,payload:S}=l,N=((S==null?void 0:S.monthlyValue)||0)>=0?E[u].positive:E[u].negative;return e.jsx("circle",{cx:h,cy:v,r:6,fill:N,stroke:N,strokeWidth:2})},activeDot:{r:8,stroke:"#6b7280",strokeWidth:2},connectNulls:!1}),e.jsx(ae,{type:"monotone",dataKey:()=>0,stroke:"#e2e8f0",strokeWidth:1,strokeDasharray:"5 5",dot:!1,activeDot:!1})]}):e.jsxs(De,{data:D,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(oe,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),e.jsx(ce,{dataKey:"month",stroke:"#64748b",fontSize:12}),e.jsx(de,{stroke:"#64748b",fontSize:12,tickFormatter:O,domain:[l=>Math.min(l-5,-5),l=>l+5]}),e.jsx(xe,{content:e.jsx(g,{})}),e.jsx(ke,{dataKey:"monthlyValue",radius:[2,2,2,2],children:D.map((l,h)=>e.jsx(Se,{fill:l.monthlyValue>=0?E[u].positive:E[u].negative},`cell-${h}`))}),e.jsx(ae,{type:"monotone",dataKey:()=>0,stroke:"#64748b",strokeWidth:2,strokeDasharray:"3 3",dot:!1,activeDot:!1})]})})}),!f&&e.jsxs("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:D.filter(l=>l.monthlyValue>0).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Meses Positivos"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-red-600",children:D.filter(l=>l.monthlyValue<0).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Meses Negativos"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[(()=>{const l=D.filter(h=>h.month!=="Início"&&h.monthlyValue!==0);return l.length>0?(l.reduce((h,v)=>h+v.monthlyValue,0)/l.length).toFixed(1):"0.0"})(),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Média Mensal"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[D.length>0?D[D.length-1].cumulativeValue.toFixed(1):0,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Acumulado"})]})]})]})},Ce=({data:M,selectedYear:u,asset:b,isAdmin:p})=>{const[G,f]=d.useState({}),[D,E]=d.useState(!0),[_,g]=d.useState(null),[O,l]=d.useState(null),[h,v]=d.useState({}),[S,V]=d.useState(!1),N={bitcoin:{profitFactor:"1.25",sharpeRatio:"2.15",recoveryFactor:"5.80",avgDailyGain:"R$ 380,50",maxDailyGain:"R$ 1.650,00",avgDailyLoss:"R$ 245,30",maxDailyLoss:"R$ 520,00",dailyWinRate:"48%",avgOperationsPerDay:"4"},miniIndice:{profitFactor:"1.45",sharpeRatio:"2.85",recoveryFactor:"7.20",avgDailyGain:"R$ 520,80",maxDailyGain:"R$ 2.100,00",avgDailyLoss:"R$ 310,40",maxDailyLoss:"R$ 680,00",dailyWinRate:"55%",avgOperationsPerDay:"6"},miniDolar:{profitFactor:"1.28",sharpeRatio:"2.40",recoveryFactor:"6.15",avgDailyGain:"R$ 485,20",maxDailyGain:"R$ 1.850,00",avgDailyLoss:"R$ 320,15",maxDailyLoss:"R$ 750,00",dailyWinRate:"50%",avgOperationsPerDay:"5"},portfolio:{profitFactor:"1.33",sharpeRatio:"2.61",recoveryFactor:"6.82",avgDailyGain:"R$ 437,42",maxDailyGain:"R$ 1.917,00",avgDailyLoss:"R$ 287,32",maxDailyLoss:"R$ 600,00",dailyWinRate:"52%",avgOperationsPerDay:"5"}};d.useEffect(()=>{const a=localStorage.getItem("assetStatistics");if(a)try{const n=JSON.parse(a);f({...N,...n})}catch(n){console.error("Error parsing saved statistics:",n),f(N)}else f(N);E(!1)},[]);const T=a=>{f(a),localStorage.setItem("assetStatistics",JSON.stringify(a))},y=()=>G[b]||N[b]||{},m=a=>a.toFixed(2),J=a=>{if(a.length===0)return 0;const n=[...a].sort((t,C)=>t-C),r=Math.floor(n.length/2);return n.length%2===0?(n[r-1]+n[r])/2:n[r]},F=(a,n)=>{switch(n){case"bitcoin":return a.bitcoin;case"miniIndice":return a.mini_indice;case"miniDolar":return a.mini_dolar;case"portfolio":return a.portfolio;default:return null}},q=(a,n)=>{l(a),v({...h,[a]:n})},$=async a=>{try{V(!0);const n=h[a];if(!n||n.trim()===""){g("Valor não pode estar vazio.");return}const t={...y(),[a]:n},C={...G,[b]:t};T(C),l(null),g(null)}catch(n){console.error("Erro ao salvar:",n),g("Erro ao salvar valor")}finally{V(!1)}},I=()=>{l(null),v({}),g(null)},P=a=>["profitFactor","sharpeRatio","recoveryFactor","avgDailyGain","maxDailyGain","avgDailyLoss","maxDailyLoss","dailyWinRate","avgOperationsPerDay"].includes(a),x=(a,n,r,t="",C="",A=!0)=>p&&A&&O===a?e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx("input",{type:"text",value:h[a]||"",onChange:W=>v({...h,[a]:W.target.value}),className:"w-24 px-2 py-1 text-xs bg-slate-700 border border-slate-500 rounded text-white focus:border-blue-500 focus:outline-none text-center",autoFocus:!0,onKeyPress:W=>{W.key==="Enter"&&$(a)},onKeyDown:W=>{W.key==="Escape"&&I()}}),e.jsx("button",{onClick:()=>$(a),disabled:S,className:"p-1 bg-green-600 hover:bg-green-700 rounded transition-colors disabled:opacity-50",title:"Salvar",children:e.jsx(pe,{className:"w-3 h-3"})}),e.jsx("button",{onClick:I,className:"p-1 bg-gray-600 hover:bg-gray-700 rounded transition-colors",title:"Cancelar",children:e.jsx(he,{className:"w-3 h-3"})})]}):e.jsxs("span",{className:`${r} ${p&&A?"cursor-pointer hover:opacity-80":""} group flex items-center justify-center`,onClick:()=>p&&A&&q(a,n),title:p&&A?"Clique para editar":void 0,children:[t,n,C,p&&A&&e.jsx(ie,{className:"w-3 h-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]}),k=(()=>{const n=M.filter(j=>j.year===u).map(j=>F(j,b)).filter(j=>j!==null);if(n.length===0)return{totalReturn:0,avgWin:0,avgLoss:0,winRate:0,profitFactor:0,payoff:0};const r=n.filter(j=>j>0),t=n.filter(j=>j<0),C=n.reduce((j,B)=>j+B,0),A=r.length>0?r.reduce((j,B)=>j+B,0)/r.length:0,W=t.length>0?Math.abs(t.reduce((j,B)=>j+B,0)/t.length):0,U=r.length/n.length*100,Q=r.reduce((j,B)=>j+B,0),H=Math.abs(t.reduce((j,B)=>j+B,0)),se=H>0?Q/H:0,te=W>0?A/W:0;return{totalReturn:C,avgWin:A,avgLoss:W,winRate:U,profitFactor:se,payoff:te}})(),L=y();return D?e.jsx("div",{className:"bg-gradient-to-br from-slate-900/50 to-blue-900/30 rounded-xl p-6 border border-slate-600/50",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-slate-700 rounded w-1/3 mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-slate-700 rounded"}),e.jsx("div",{className:"h-4 bg-slate-700 rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-slate-700 rounded w-4/6"})]})]})}):e.jsxs("div",{className:"bg-gradient-to-br from-slate-900/50 to-blue-900/30 rounded-xl p-6 border border-slate-600/50",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("h3",{className:"text-2xl font-bold text-white mb-2",children:["Análise Detalhada - ",(()=>{switch(b){case"bitcoin":return"Portfólio Bitcoin";case"miniIndice":return"Portfólio Mini Índice";case"miniDolar":return"Portfólio Mini Dólar";case"portfolio":return"Portfólio Completo";default:return"Portfólio"}})()]}),e.jsxs("p",{className:"text-slate-300 text-sm",children:["Estatísticas avançadas e métricas de performance para ",u]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-slate-800/40 via-blue-900/30 to-teal-900/20 rounded-xl p-4 border border-slate-600/50",children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-3 text-center",children:"Resumo da Performance"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Retorno Total:"}),x("totalReturn",`${k.totalReturn>=0?"+":""}${m(k.totalReturn)}%`,`block font-semibold ${k.totalReturn>=0?"text-green-400":"text-red-400"}`,"","",!1)]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Meses Analisados:"}),x("monthsAnalyzed",M.filter(a=>a.year===u&&F(a,b)!==null).length.toString(),"block font-semibold text-blue-400","","",!1)]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Payoff Mensal:"}),x("payoff",m(k.payoff),`block font-semibold ${k.payoff>=1?"text-green-400":"text-red-400"}`,"","",!1)]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Retorno Médio Mensal:"}),x("avgMonthlyReturn",`${m(k.totalReturn/Math.max(M.filter(a=>a.year===u&&F(a,b)!==null).length,1))}%`,`block font-semibold ${k.totalReturn/Math.max(M.filter(a=>a.year===u&&F(a,b)!==null).length,1)>=0?"text-green-400":"text-red-400"}`,"","",!1)]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Fator de Lucro:"}),x("profitFactor",L.profitFactor||"1.33","block font-semibold text-green-400","","",P("profitFactor"))]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Sharpe Ratio:"}),x("sharpeRatio",L.sharpeRatio||"2.61","block font-semibold text-green-400","","",P("sharpeRatio"))]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"Fator de Recuperação:"}),x("recoveryFactor",L.recoveryFactor||"6.82","block font-semibold text-green-400","","",P("recoveryFactor"))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-900/20 via-slate-800/40 to-blue-900/20 rounded-xl p-3 border border-green-500/20",children:[e.jsxs("h5",{className:"text-green-400 font-semibold mb-2 flex items-center",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Análise de Ganhos Mensais"]}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Meses Positivos:"}),x("positiveMonths",M.filter(r=>r.year===u).map(r=>F(r,b)).filter(r=>r!==null).filter(r=>r>0).length.toString(),"text-green-400 font-medium","","",!1)]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Ganho Médio:"}),x("avgWin",`${m(k.avgWin)}%`,"text-green-400 font-medium","+","",!1)]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Ganho Mediano:"}),x("medianWin",`${(()=>{const r=M.filter(t=>t.year===u).map(t=>F(t,b)).filter(t=>t!==null).filter(t=>t>0);return m(J(r))})()}%`,"text-green-400 font-medium","+","",!1)]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Maior Ganho:"}),x("maxWin",`${(()=>{const r=M.filter(t=>t.year===u).map(t=>F(t,b)).filter(t=>t!==null).filter(t=>t>0);return r.length>0?m(Math.max(...r)):"0.00"})()}%`,"text-green-400 font-medium","+","",!1)]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-900/20 via-slate-800/40 to-blue-900/20 rounded-xl p-3 border border-red-500/20",children:[e.jsxs("h5",{className:"text-red-400 font-semibold mb-2 flex items-center",children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"Análise de Perdas Mensais"]}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Meses Negativos:"}),x("negativeMonths",M.filter(r=>r.year===u).map(r=>F(r,b)).filter(r=>r!==null).filter(r=>r<0).length.toString(),"text-red-400 font-medium","","",!1)]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Perda Média:"}),x("avgLoss",`${m(k.avgLoss)}%`,"text-red-400 font-medium","-","",!1)]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Perda Mediana:"}),x("medianLoss",`${(()=>{const r=M.filter(t=>t.year===u).map(t=>F(t,b)).filter(t=>t!==null).filter(t=>t<0).map(t=>Math.abs(t));return m(J(r))})()}%`,"text-red-400 font-medium","-","",!1)]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Maior Perda:"}),x("maxLoss",`${(()=>{const r=M.filter(t=>t.year===u).map(t=>F(t,b)).filter(t=>t!==null).filter(t=>t<0);return r.length>0?m(Math.min(...r)):"0.00"})()}%`,"text-red-400 font-medium","","",!1)]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-900/20 via-slate-800/40 to-cyan-900/20 rounded-xl p-3 border border-blue-500/20",children:[e.jsxs("h5",{className:"text-blue-400 font-semibold mb-2 flex items-center",children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Consistência Mensal"]}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Taxa de Acerto Mensal:"}),x("winRate",`${m(k.winRate)}%`,`font-medium ${k.winRate>=50?"text-green-400":"text-red-400"}`,"","",!1)]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Fator de Lucro Mensal:"}),x("monthlyProfitFactor",m(k.profitFactor),`font-medium ${k.profitFactor>=1?"text-green-400":"text-red-400"}`,"","",!1)]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Meses Positivos Consecutivos:"}),x("consecutiveWins",`${(()=>{const n=M.filter(C=>C.year===u).map(C=>F(C,b)).filter(C=>C!==null);let r=0,t=0;return n.forEach(C=>{C>0?(t++,r=Math.max(r,t)):t=0}),r})()} meses`,"text-blue-400 font-medium","","",!1)]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/20 via-slate-800/40 to-teal-900/20 rounded-xl p-3 border border-purple-500/20",children:[e.jsxs("h5",{className:"text-purple-400 font-semibold mb-2 flex items-center",children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Performance Diária"]}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Ganho Médio Diário:"}),x("avgDailyGain",L.avgDailyGain||"R$ 437,42","text-green-400 font-medium","","",P("avgDailyGain"))]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Ganho Máximo Diário:"}),x("maxDailyGain",L.maxDailyGain||"R$ 1.917,00","text-green-400 font-medium","","",P("maxDailyGain"))]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Perda Média Diária:"}),x("avgDailyLoss",L.avgDailyLoss||"R$ 287,32","text-red-400 font-medium","","",P("avgDailyLoss"))]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Perda Máxima Diária:"}),x("maxDailyLoss",L.maxDailyLoss||"R$ 600,00","text-red-400 font-medium","","",P("maxDailyLoss"))]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Taxa de Acerto Diária:"}),x("dailyWinRate",L.dailyWinRate||"52%","font-medium text-green-400","","",P("dailyWinRate"))]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Média Operações/Dia:"}),x("avgOperationsPerDay",L.avgOperationsPerDay||"5","text-blue-400 font-medium","","",P("avgOperationsPerDay"))]})]})]})]}),_&&e.jsx("div",{className:"mt-4 bg-red-900/20 border border-red-500 rounded-lg p-3",children:e.jsx("p",{className:"text-red-400 text-sm",children:_})})]})]})},Fe=()=>{const M=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],[u,b]=d.useState("portfolio"),[p,G]=d.useState("portfolio"),[f,D]=d.useState(!1),[E,_]=d.useState(2024),[g,O]=d.useState(2024),[l,h]=d.useState([]),[v,S]=d.useState([2024]),[V,N]=d.useState(!0),[T,y]=d.useState(null),[m,J]=d.useState(!1),[F,q]=d.useState(null),[$,I]=d.useState(""),[P,x]=d.useState("live");d.useState("portfolio"),d.useState(!0);const[R,k]=d.useState({dailyLossLimit:5,monthlyLossLimit:15,stopLossPercentage:2,isActive:!0}),[L,a]=d.useState(!1),n=s=>{switch(s){case"bitcoin":return"Bitcoin";case"miniIndice":return"Mini Índice";case"miniDolar":return"Mini Dólar";case"portfolio":return"Portfólio Completo";default:return s}},r=(s,c)=>{switch(c){case"bitcoin":return s.bitcoin;case"miniIndice":return s.miniIndice;case"miniDolar":return s.miniDolar;case"portfolio":return s.portfolio;default:return null}};l.filter(s=>s.year===E);const t=l.filter(s=>s.year===g),A=((s,c)=>{const i=s.map(X=>r(X,c)).filter(X=>X!==null);if(i.length===0)return{totalReturn:0,winRate:0,bestMonth:0,worstMonth:0};const o=i.reduce((X,ve)=>X+ve,0),w=i.filter(X=>X>0).length/i.length*100,be=Math.max(...i),je=Math.min(...i);return{totalReturn:o,winRate:w,bestMonth:be,worstMonth:je}})(t,p),W=async()=>{try{const{data:{user:s}}=await Y.auth.getUser();D((s==null?void 0:s.email)==="pedropardal04@gmail.com")}catch(s){console.error("Error checking admin status:",s),D(!1)}},U=async()=>{try{N(!0);const{data:s,error:c}=await Y.from("monthly_results").select("*").order("year",{ascending:!1}).order("month",{ascending:!0});if(c)throw c;const i=s.map(o=>({id:o.id,month:o.month,year:o.year,bitcoin:o.bitcoin,miniIndice:o.mini_indice,miniDolar:o.mini_dolar,portfolio:o.portfolio,resultType:o.result_type||"live"}));h(i)}catch(s){console.error("Error fetching results:",s),y("Erro ao carregar dados")}finally{N(!1)}},Q=async s=>{try{const{error:c}=await Y.from("monthly_results").insert({month:s.month,year:s.year,bitcoin:s.bitcoin,mini_indice:s.miniIndice,mini_dolar:s.miniDolar,portfolio:s.portfolio,result_type:s.resultType});if(c)throw c;await U(),J(!1)}catch(c){console.error("Error adding month:",c),y("Erro ao adicionar mês")}},H=async(s,c,i,o)=>{try{const z={bitcoin:"bitcoin",miniIndice:"mini_indice",miniDolar:"mini_dolar",portfolio:"portfolio"},{error:w}=await Y.from("monthly_results").update({[z[i]]:o}).eq("month",s).eq("year",c);if(w)throw w;await U()}catch(z){console.error("Error updating month:",z),y("Erro ao atualizar dados")}},se=async(s,c,i)=>{try{const{error:o}=await Y.from("monthly_results").update({result_type:i}).eq("month",s).eq("year",c);if(o)throw o;await U()}catch(o){console.error("Error updating result type:",o),y("Erro ao atualizar tipo de resultado")}},te=async(s,c,i)=>{try{y(null);const o={bitcoin:"bitcoin",miniIndice:"mini_indice",miniDolar:"mini_dolar",portfolio:"portfolio"},{error:z}=await Y.from("monthly_results").update({[o[i]]:null}).eq("month",s).eq("year",c);if(z)throw z;await U(),q(null),I(""),x("live")}catch(o){console.error("Error deleting result:",o),y("Erro ao excluir resultado")}},j=async(s,c)=>{try{y(null);const i=t.find(o=>o.month===s);if(i){const o=$===""?null:parseFloat($);if($!==""&&(isNaN(o)||!isFinite(o))){y("Valor inválido. Use números decimais (ex: 12.5)");return}await H(s,c,p,o),i.resultType!==P&&await se(s,c,P)}else{const o={month:s,year:c,bitcoin:p==="bitcoin"?$===""?null:parseFloat($):null,miniIndice:p==="miniIndice"?$===""?null:parseFloat($):null,miniDolar:p==="miniDolar"?$===""?null:parseFloat($):null,portfolio:p==="portfolio"?$===""?null:parseFloat($):null,resultType:P};await Q(o)}q(null),I(""),x("live")}catch(i){console.error("Erro ao editar valor:",i),y("Erro ao salvar alteração")}},B=async()=>{try{y(null),localStorage.setItem(`risk_settings_${u}`,JSON.stringify(R)),a(!1)}catch(s){console.error("Error updating risk settings:",s),y("Erro ao atualizar configurações de risco")}},ne=()=>{try{const s=localStorage.getItem(`risk_settings_${p}`);s&&k(JSON.parse(s))}catch(s){console.error("Error loading risk settings:",s)}};d.useEffect(()=>{W(),U()},[]),d.useEffect(()=>{ne()},[u]);const fe=l.length===0;return d.useEffect(()=>{if(l.length>0){const s=[...new Set(l.map(i=>i.year))].sort((i,o)=>o-i);S(s);const c=s[0];localStorage.getItem(`risk_settings_${u}`),_(c),O(c)}},[l]),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-black text-white",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6 gap-4 px-4 sm:px-0",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[e.jsx(ee,{className:"w-6 h-6"}),"Gráfico de Performance"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4 text-blue-400 flex-shrink-0"}),e.jsx("select",{value:E,onChange:s=>_(Number(s.target.value)),className:"bg-slate-800 border border-slate-600 rounded-lg px-2 sm:px-3 py-2 text-xs sm:text-sm min-w-[80px] sm:min-w-[100px] focus:border-blue-500 focus:outline-none",children:v.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4 text-purple-400 flex-shrink-0"}),e.jsxs("select",{value:u,onChange:s=>b(s.target.value),className:"bg-slate-800 border border-slate-600 rounded-lg px-2 sm:px-3 py-2 text-xs sm:text-sm min-w-[120px] sm:min-w-[150px] focus:border-blue-500 focus:outline-none",children:[e.jsx("option",{value:"bitcoin",children:"Bitcoin"}),e.jsx("option",{value:"miniIndice",children:"Mini Índice"}),e.jsx("option",{value:"miniDolar",children:"Mini Dólar"}),e.jsx("option",{value:"portfolio",children:"Portfólio Completo"})]})]})]})]}),e.jsx(Re,{data:l,asset:u,year:E})]}),e.jsx(Ce,{data:l,asset:u,availableYears:v,selectedYear:E,isAdmin:f}),f&&e.jsxs("div",{className:"mb-12 mt-16",children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2 mb-6",children:[e.jsx(le,{className:"w-6 h-6 text-red-400"}),"Gerenciamento de Risco - ",n(u)]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-900/20 via-slate-800/40 to-orange-900/20 rounded-xl p-6 border border-red-500/30",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-600",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ue,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Limite Perda Diária"})]}),L?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",step:"0.1",value:R.dailyLossLimit,onChange:s=>k({...R,dailyLossLimit:parseFloat(s.target.value)||0}),className:"w-16 px-2 py-1 text-sm bg-slate-700 border border-slate-500 rounded text-white focus:border-red-500 focus:outline-none"}),e.jsx("span",{className:"text-red-400 font-bold",children:"%"})]}):e.jsxs("div",{className:"text-xl font-bold text-red-400",children:["-",R.dailyLossLimit.toFixed(1),"%"]})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-600",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Z,{className:"w-4 h-4 text-orange-400"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Limite Perda Mensal"})]}),L?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",step:"0.1",value:R.monthlyLossLimit,onChange:s=>k({...R,monthlyLossLimit:parseFloat(s.target.value)||0}),className:"w-16 px-2 py-1 text-sm bg-slate-700 border border-slate-500 rounded text-white focus:border-orange-500 focus:outline-none"}),e.jsx("span",{className:"text-orange-400 font-bold",children:"%"})]}):e.jsxs("div",{className:"text-xl font-bold text-orange-400",children:["-",R.monthlyLossLimit.toFixed(1),"%"]})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-600",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(le,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Stop Loss"})]}),L?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",step:"0.1",value:R.stopLossPercentage,onChange:s=>k({...R,stopLossPercentage:parseFloat(s.target.value)||0}),className:"w-16 px-2 py-1 text-sm bg-slate-700 border border-slate-500 rounded text-white focus:border-purple-500 focus:outline-none"}),e.jsx("span",{className:"text-purple-400 font-bold",children:"%"})]}):e.jsxs("div",{className:"text-xl font-bold text-purple-400",children:["-",R.stopLossPercentage.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"riskActive",checked:R.isActive,onChange:s=>k({...R,isActive:s.target.checked}),disabled:!L,className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"riskActive",className:"text-sm text-gray-300",children:"Controle de Risco Ativo"})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${R.isActive?"bg-green-500/20 text-green-300 border border-green-500/30":"bg-red-500/20 text-red-300 border border-red-500/30"}`,children:R.isActive?"ATIVO":"INATIVO"})]}),e.jsx("div",{className:"flex items-center gap-3",children:L?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:B,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors text-sm font-medium",children:[e.jsx(pe,{className:"w-4 h-4"}),"Salvar Configurações"]}),e.jsxs("button",{onClick:()=>{a(!1),ne()},className:"flex items-center gap-2 bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded-lg transition-colors text-sm font-medium",children:[e.jsx(he,{className:"w-4 h-4"}),"Cancelar"]})]}):e.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg transition-colors text-sm font-medium",children:[e.jsx(ie,{className:"w-4 h-4"}),"Editar Limites"]})})]}),e.jsxs("div",{className:"mt-6 bg-slate-800/30 rounded-lg p-4 border border-slate-600/50",children:[e.jsxs("h4",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4 text-blue-400"}),"Como Funciona o Controle de Risco"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-300",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-red-300 mb-2",children:"Limite de Perda Diária"}),e.jsxs("p",{children:["Quando a perda diária atinge ",R.dailyLossLimit,"%, todas as operações são pausadas até o próximo dia útil."]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-orange-300 mb-2",children:"Limite de Perda Mensal"}),e.jsxs("p",{children:["Se a perda mensal atingir ",R.monthlyLossLimit,"%, o sistema para as operações até o próximo mês."]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-purple-300 mb-2",children:"Stop Loss Automático"}),e.jsxs("p",{children:["Stop loss automático em ",R.stopLossPercentage,"% por operação individual."]})]})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8 sm:mb-12 mt-8 gap-4 px-4 sm:px-0",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[e.jsx(Z,{className:"w-6 h-6"}),e.jsxs("span",{className:"hidden sm:inline",children:["Calendário de Resultados ",g," - ",n(p)]}),e.jsxs("span",{className:"sm:hidden",children:["Resultados ",g]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4 text-blue-400 flex-shrink-0"}),e.jsx("select",{value:g,onChange:s=>O(Number(s.target.value)),className:"bg-slate-800 border border-slate-600 rounded-lg px-2 sm:px-3 py-2 text-xs sm:text-sm min-w-[80px] sm:min-w-[100px] focus:border-blue-500 focus:outline-none",children:v.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4 text-purple-400 flex-shrink-0"}),e.jsxs("select",{value:p,onChange:s=>G(s.target.value),className:"bg-slate-800 border border-slate-600 rounded-lg px-2 sm:px-3 py-2 text-xs sm:text-sm min-w-[120px] sm:min-w-[150px] focus:border-blue-500 focus:outline-none",children:[e.jsx("option",{value:"bitcoin",children:"Bitcoin"}),e.jsx("option",{value:"miniIndice",children:"Mini Índice"}),e.jsx("option",{value:"miniDolar",children:"Mini Dólar"}),e.jsx("option",{value:"portfolio",children:"Portfólio Completo"})]})]}),f&&e.jsxs("button",{onClick:()=>J(!0),className:"flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 px-3 sm:px-4 py-2 rounded-lg transition-colors text-xs sm:text-sm font-medium shadow-lg hover:shadow-xl transform hover:scale-105 min-w-[120px] sm:min-w-[140px]",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Adicionar Mês"}),e.jsx("span",{className:"sm:hidden",children:"Adicionar"})]})]})]}),V?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):T?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[e.jsx(ue,{className:"w-5 h-5"}),e.jsx("span",{children:T})]})}):fe?e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-8 border border-slate-600",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Sistema em Modo de Produção"}),e.jsxs("p",{className:"text-slate-300 mb-6",children:["Os dados foram zerados para início da operação real.",f?' Use o botão "Adicionar Mês" para inserir os primeiros resultados.':" Os resultados aparecerão aqui conforme forem sendo inseridos."]}),f&&e.jsxs("button",{onClick:()=>J(!0),className:"inline-flex items-center gap-2 bg-green-600 hover:bg-green-700 px-6 py-3 rounded-lg transition-colors",children:[e.jsx(re,{className:"w-5 h-5"}),"Adicionar Primeiro Resultado"]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-3 sm:gap-4 mb-8 px-2 sm:px-0",children:M.map(s=>{const c=t.find(w=>w.month===s),i=c?r(c,p):null,o=i!==null,z=(c==null?void 0:c.resultType)==="backtest";return e.jsxs("div",{className:`relative p-3 sm:p-4 lg:p-6 rounded-xl border transition-all duration-200 ${o&&f?"hover:scale-105 cursor-pointer":o?"hover:scale-105":""} ${i===null?"bg-slate-800/50 border-slate-600":i>=0?"bg-gradient-to-br from-green-900/30 to-green-800/20 border-green-500/30":"bg-gradient-to-br from-red-900/30 to-red-800/20 border-red-500/30"}`,onClick:()=>{f&&F!==`${s}-${g}`&&(q(`${s}-${g}`),I((i==null?void 0:i.toString())||""),x((c==null?void 0:c.resultType)||"live"))},children:[o&&e.jsx("div",{className:"absolute top-2 left-2 group/tag",children:e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full font-medium cursor-pointer transition-all hover:scale-105 ${z?"bg-orange-500/20 text-orange-300 border border-orange-500/30":"bg-green-500/20 text-green-300 border border-green-500/30"}`,onClick:w=>{f&&(w.stopPropagation(),q(`${s}-${g}`),I((i==null?void 0:i.toString())||""),x((c==null?void 0:c.resultType)||"live"))},title:f?"Clique para editar tipo de resultado":void 0,children:[z?"Backtest":"Ao Vivo",f&&e.jsx("span",{className:"ml-1 opacity-0 group-hover/tag:opacity-100 transition-opacity",children:"✏️"})]})}),f&&F!==`${s}-${g}`&&e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:o?e.jsx("button",{onClick:w=>{w.stopPropagation(),q(`${s}-${g}`),I((i==null?void 0:i.toString())||""),x((c==null?void 0:c.resultType)||"live")},className:"p-1 bg-slate-700/80 hover:bg-slate-600 rounded-full transition-colors",title:"Editar valor",children:e.jsx(ie,{className:"h-3 w-3 text-slate-300"})}):e.jsx("button",{onClick:w=>{w.stopPropagation(),q(`${s}-${g}`),I(""),x("live")},className:"p-1.5 bg-green-600/80 hover:bg-green-500 rounded-full transition-colors shadow-lg",title:"Adicionar valor",children:e.jsx(re,{className:"h-4 w-4 text-white"})})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"text-sm sm:text-base lg:text-lg font-semibold mb-1",children:[e.jsx("span",{className:"sm:hidden",children:s.substring(0,3)}),e.jsx("span",{className:"hidden sm:inline",children:s})]}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mb-2 sm:mb-3",children:g}),F===`${s}-${g}`?e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-slate-400 mb-1",children:[e.jsx("span",{className:"hidden sm:inline",children:"Tipo de Resultado"}),e.jsx("span",{className:"sm:hidden",children:"Tipo"})]}),e.jsxs("select",{value:P,onChange:w=>x(w.target.value),className:"w-full px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm bg-slate-700 border border-slate-500 rounded-lg text-white focus:border-blue-500 focus:outline-none",children:[e.jsx("option",{value:"live",children:"Ao Vivo"}),e.jsx("option",{value:"backtest",children:"Backtest"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Valor (%)"}),e.jsx("input",{type:"number",step:"0.1",value:$,onChange:w=>I(w.target.value),className:"w-full px-2 sm:px-3 py-2 sm:py-3 bg-slate-700 border border-slate-500 rounded-lg text-white text-center focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 text-sm sm:text-lg",placeholder:o?i==null?void 0:i.toString():"0.0",autoFocus:!0,onKeyPress:w=>{w.key==="Enter"&&j(s,g)},onKeyDown:w=>{w.key==="Escape"&&(q(null),I(""),x("live"),y(null))}})]}),e.jsxs("div",{className:"flex gap-1 sm:gap-2 justify-center flex-wrap",children:[e.jsx("button",{onClick:()=>j(s,g),className:"px-2 sm:px-4 py-1 sm:py-2 bg-green-600 hover:bg-green-700 rounded-lg transition-colors text-xs sm:text-sm font-medium flex items-center min-w-[60px] sm:min-w-[80px] justify-center",title:"Salvar",children:o?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sm:hidden",children:"Salvar"}),e.jsx("span",{className:"hidden sm:inline",children:"Atualizar"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sm:hidden",children:"Add"}),e.jsx("span",{className:"hidden sm:inline",children:"Adicionar"})]})}),o&&e.jsxs("button",{onClick:()=>{confirm(`Tem certeza que deseja excluir o resultado de ${s} ${g} para ${n(p)}?`)&&te(s,g,p)},className:"px-2 sm:px-4 py-1 sm:py-2 bg-red-600 hover:bg-red-700 rounded-lg transition-colors text-xs sm:text-sm font-medium min-w-[50px] sm:min-w-[70px] justify-center",title:"Excluir resultado",children:[e.jsx("span",{className:"sm:hidden",children:"Del"}),e.jsx("span",{className:"hidden sm:inline",children:"Excluir"})]}),e.jsxs("button",{onClick:()=>{q(null),I(""),x("live"),y(null)},className:"px-2 sm:px-4 py-1 sm:py-2 bg-gray-600 hover:bg-gray-700 rounded-lg transition-colors text-xs sm:text-sm font-medium min-w-[60px] sm:min-w-[80px] justify-center",title:"Cancelar",children:[e.jsx("span",{className:"sm:hidden",children:"X"}),e.jsx("span",{className:"hidden sm:inline",children:"Cancelar"})]})]}),T&&e.jsx("div",{className:"text-red-400 text-xs text-center mt-2",children:T})]}):o?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:`text-lg sm:text-xl lg:text-2xl font-bold transition-colors ${i>=0?"text-green-400":"text-red-400"} ${f?"group-hover:text-blue-400":""}`,children:[i>=0?"+":"",i.toFixed(1),"%"]}),f&&e.jsx("div",{className:"text-xs text-slate-500 mt-1 opacity-0 group-hover:opacity-100 transition-opacity hidden sm:block",children:"Clique para editar"})]})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-gray-500 text-sm sm:text-base lg:text-lg group",children:[e.jsx("div",{children:"Sem dados"}),f&&e.jsx("div",{className:"text-xs text-slate-400 mt-1 opacity-0 group-hover:opacity-100 transition-opacity hidden sm:block",children:"Clique no + para adicionar"})]})})]})]},s)})}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 lg:gap-4 px-2 sm:px-0",children:[e.jsxs("div",{className:"bg-slate-800/50 p-3 sm:p-4 lg:p-6 rounded-xl border border-slate-600",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(K,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-400"}),e.jsx("span",{className:"text-xs md:text-sm text-gray-400",children:"Total Acumulado"})]}),e.jsxs("div",{className:`text-lg sm:text-xl lg:text-2xl font-bold ${A.totalReturn>=0?"text-green-400":"text-red-400"}`,children:[A.totalReturn>=0?"+":"",A.totalReturn.toFixed(1),"%"]})]}),e.jsxs("div",{className:"bg-slate-800/50 p-3 sm:p-4 lg:p-6 rounded-xl border border-slate-600",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(K,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-400"}),e.jsx("span",{className:"text-xs md:text-sm text-gray-400",children:"Taxa de Acerto"})]}),e.jsxs("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-green-400",children:[A.winRate.toFixed(1),"%"]})]}),e.jsxs("div",{className:"bg-slate-800/50 p-3 sm:p-4 lg:p-6 rounded-xl border border-slate-600",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(K,{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-400"}),e.jsx("span",{className:"text-xs md:text-sm text-gray-400",children:"Melhor Mês"})]}),e.jsxs("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-yellow-400",children:["+",A.bestMonth.toFixed(1),"%"]})]}),e.jsxs("div",{className:"bg-slate-800/50 p-3 sm:p-4 lg:p-6 rounded-xl border border-slate-600",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ge,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-400"}),e.jsx("span",{className:"text-xs md:text-sm text-gray-400",children:"Pior Mês"})]}),e.jsxs("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-red-400",children:[A.worstMonth.toFixed(1),"%"]})]})]})]})]}),m&&f&&e.jsx($e,{onAdd:Q,onClose:()=>J(!1),months:M,availableYears:v})]})})},$e=({onAdd:M,onClose:u,months:b,availableYears:p})=>{const[G,f]=d.useState(""),[D,E]=d.useState(new Date().getFullYear()),[_,g]=d.useState("live"),[O,l]=d.useState(""),[h,v]=d.useState(""),[S,V]=d.useState(""),[N,T]=d.useState(""),y=m=>{if(m.preventDefault(),!G){alert("Por favor, selecione um mês");return}M({month:G,year:D,resultType:_,bitcoin:O?parseFloat(O):null,miniIndice:h?parseFloat(h):null,miniDolar:S?parseFloat(S):null,portfolio:N?parseFloat(N):null})};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-600 w-full max-w-md",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Adicionar Novo Mês"}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Mês"}),e.jsxs("select",{value:G,onChange:m=>f(m.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2",required:!0,children:[e.jsx("option",{value:"",children:"Selecione um mês"}),b.map(m=>e.jsx("option",{value:m,children:m},m))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Ano"}),e.jsx("input",{type:"number",value:D,onChange:m=>E(parseInt(m.target.value)),className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tipo de Resultado"}),e.jsxs("select",{value:_,onChange:m=>g(m.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"live",children:"Mercado ao Vivo"}),e.jsx("option",{value:"backtest",children:"Backtest"})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:_==="live"?"Resultado de operações reais":"Resultado de teste histórico"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bitcoin (%)"}),e.jsx("input",{type:"number",step:"0.1",value:O,onChange:m=>l(m.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2",placeholder:"0.0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Mini Índice (%)"}),e.jsx("input",{type:"number",step:"0.1",value:h,onChange:m=>v(m.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2",placeholder:"0.0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Mini Dólar (%)"}),e.jsx("input",{type:"number",step:"0.1",value:S,onChange:m=>V(m.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2",placeholder:"0.0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Portfólio (%)"}),e.jsx("input",{type:"number",step:"0.1",value:N,onChange:m=>T(m.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2",placeholder:"0.0"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors",children:"Adicionar"}),e.jsx("button",{type:"button",onClick:u,className:"flex-1 bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded-lg transition-colors",children:"Cancelar"})]})]})]})})},Ie=()=>(d.useState({dailyLossLimit:5,monthlyLossLimit:15,stopLossPercentage:2,isActive:!0}),e.jsx(Ne,{children:e.jsx(Fe,{})}));export{Ie as default};
